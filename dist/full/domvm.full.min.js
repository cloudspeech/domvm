// https://github.com/domvm/domvm (v3.4.11-dev, full build)
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).domvm={})}(this,function(e){"use strict";var t=0,n=1,r=2,l=3,u=4,a=5,o="undefined"!=typeof window?document:{},i={};function f(){}var s=Array.isArray;function d(e){return null!=e&&e.constructor===Object}function c(e,t,n,r){e.splice.apply(e,[n,r].concat(t))}function v(e){var t=typeof e;return"string"===t||"number"===t}function y(e){return"function"==typeof e}function h(e){return"object"==typeof e&&y(e.then)}function p(e){for(var t=arguments,n=1;n<t.length;n++)for(var r in t[n])e[r]=t[n][r];return e}function m(e,t,n){var r;while(r=t.shift())0===t.length?e[r]=n:e[r]=e=e[r]||{}}function b(e,t){for(var n=[],r=t;r<e.length;r++)n.push(e[r]);return n}function g(e,t){for(var n in e)if(e[n]!==t[n])return false;return true}function k(e,t){var n=e.length;if(t.length!==n)return false;for(var r=0;r<n;r++)if(e[r]!==t[r])return false;return true}function w(e,t){return e===t||null!=t&&null!=e&&(s(e)?k(e,t):!!d(e)&&g(e,t))}function _(e,t,n){return function(){return e.apply(n,t)}}function x(e){var t=e.slice(),n=[];n[0]=0;for(var r,l,u,a=0,o=0;o<e.length;++o){var i=e[o];if(e[u=n[a]]<i)t[o]=u,n[++a]=o;else{r=0,l=a;while(r<l)e[n[u=r+l>>1]]<i?r=u+1:l=u;i<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}l=n[a];while(a>=0)n[a--]=l,l=t[l];return n}function N(e,t){var n,r=0,l=t.length-1;if(l<=2147483647)while(r<=l){if(t[n=r+l>>1]===e)return n;t[n]<e?r=n+1:l=n-1}else while(r<=l){if(t[n=Math.floor((r+l)/2)]===e)return n;t[n]<e?r=n+1:l=n-1}return r==t.length?null:r}function S(e){return"."===e[0]}function C(e){return"o"===e[0]&&"n"===e[1]}function R(e){return"_"===e[0]}function E(e){return"style"===e}function I(e){e&&e.el&&e.el.offsetHeight}function O(e){return null!=e.node&&null!=e.node.el}function M(e,t){switch(t){case"value":case"checked":case"selected":return true}return false}function q(e){e=e||i;while(null==e.vm&&e.parent)e=e.parent;return e.vm}function A(){}var j=A.prototype={constructor:A,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_diff:null,_dead:false,_lis:false,idx:null,parent:null};function L(e){var t=new A;return t.type=r,t.body=e,t}j._class=null;var V={},D=/\[([^=\]]+)=?([^\]]+)?\]/g;function T(e){var t=V[e];if(null==t){var n,r,l,u;V[e]=t={tag:(n=e.match(/^[-\w]+/))?n[0]:"div",id:(r=e.match(/#([-\w]+)/))?r[1]:null,class:(l=e.match(/\.([-\w.]+)/))?l[1].replace(/\./g," "):null,attrs:null};while(u=D.exec(e))null==t.attrs&&(t.attrs={}),t.attrs[u[1]]=u[2]||""}return t}var U=1,z=2,F=4,H=8;function G(e,t,r,l){var u=new A;u.type=n,u.flags=l||0,u.attrs=t||null;var a=T(e);e=a.tag;var o=null!=a.id,i=null!=a.class,f=null!=a.attrs;if(o||i||f){var s=u.attrs||{};if(o&&null==s.id&&(s.id=a.id),i&&(u._class=a.class,s.class=a.class+(null!=s.class?" "+s.class:"")),f)for(var d in a.attrs)null==s[d]&&(s[d]=a.attrs[d]);u.attrs=s}if(u.tag=e,null!=u.attrs){var c=u.attrs;null!=c._key&&(u.key=c._key),null!=c._ref&&(u.ref=c._ref),null!=c._hooks&&(u.hooks=c._hooks),null!=c._data&&(u.data=c._data),null!=c._flags&&(u.flags=c._flags),null==u.key&&(null!=u.ref?u.key=u.ref:null!=c.id?u.key=c.id:null!=c.name&&(u.key=c.name+("radio"===c.type||"checkbox"===c.type?c.value:"")))}return null!=r&&(u.body=r,r instanceof W&&(u.flags=r.flags)),u}function W(e,t,n){var r,l=this,a=e.length;l.flags=H,l.items=e,l.length=a,l.key=function(){return null},l.diff={val:function(n,r){return t.val(e[n],r)},eq:function(e,n){return t.eq(n._diff,l.diff.val(e))}},l.tpl=function(t){return r(e[t],t)},l.map=function(e){return r=e,l},l.body=function(e){for(var t=[],n=0;n<a;n++){var r=l.tpl(n);r.type!=u&&(r._diff=l.diff.val(n,e)),t.push(r)}e.body=t,J(e)},null!=n&&(l.flags|=F,l.key=function(t){return n(e[t],t)}),y(t)&&(l.diff={val:function(n){return t(e[n])},eq:function(e,t){return w(t._diff,l.diff.val(e))}})}var B=function(e){return e},P=f,Y=f;function $(e){B=e.val,P=e.on,Y=e.off}function K(e,t,n){m(e,("refs."+t).split("."),n)}function X(e){while(e=e.parent)e.flags|=U}function Z(e,t,n,r){if(e.type!==a&&e.type!==u){e.parent=t,e.idx=n,e.vm=r,null!=e.ref&&K(q(e),e.ref,e);var l=e.hooks,o=r&&r.hooks;(l&&(l.willRemove||l.didRemove)||o&&(o.willUnmount||o.didUnmount))&&X(e),s(e.body)?J(e):""===e.body?e.body=null:(e.body=B(e.body,q(e)._stream),null==e.body||e.body instanceof W||(e.body=""+e.body))}}function J(e){for(var t=e.body,n=0;n<t.length;n++){var l=t[n];false===l||null==l?t.splice(n--,1):s(l)?c(t,l,n--,1):(null==l.type&&(t[n]=l=L(""+l)),l.type===r?null==l.body||""===l.body?t.splice(n--,1):n>0&&t[n-1].type===r?(t[n-1].body+=l.body,t.splice(n--,1)):Z(l,e,n,null):Z(l,e,n,null))}}var Q={animationIterationCount:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridColumn:true,order:true,lineClamp:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function ee(e,t){return isNaN(t)||Q[e]?t:t+"px"}function te(e,t){var n=(e.attrs||i).style,r=t?(t.attrs||i).style:null;if(null==n||v(n))e.el.style.cssText=n;else{for(var l in n){var u=n[l];n[l]=u=B(u,q(e)._stream),(null==r||null!=u&&u!==r[l])&&(e.el.style[l]=ee(l,u))}if(r)for(var a in r)null==n[a]&&(e.el.style[a]="")}}var ne={};function re(e){p(ne,e)}var le=f,ue=false,ae=f;function oe(e){le=e.onevent||le,null!=e.syncRedraw&&(ue=e.syncRedraw),null!=e.didRedraws&&(ae=e.didRedraws),e.onemit&&re(e.onemit),e.stream&&$(e.stream)}var ie={};function fe(e){ie[e]||(ie[e]=true,de(o,e,ye,true))}function se(e,t,n,r){e.removeEventListener(t.slice(2),n,r)}function de(e,t,n,r){e.addEventListener(t.slice(2),n,r)}function ce(e,t,n,r,l){var u,a,o=e.apply(l,t.concat([n,r,l,l.data]));if(u=l.onevent(n,r,l,l.data,t),a=le.call(null,n,r,l,l.data,t),false===o||false===u||false===a)return n.preventDefault(),n.stopPropagation(),false}function ve(e,t){var n,r,l="on"+e,u=[];while(t)(r=t.attrs)&&(n=r[l])&&s(n)&&u.unshift(n),t=t.parent;return u}function ye(e){var t=e.target._node;if(null!=t)for(var n=ve(e.type,t),r=q(t),l=0;l<n.length;l++){if(false===ce(n[l][0],n[l].slice(1),e,t,r))break}}function he(e,t,n,r){if(n!=r){var l=e.el;y(n)?de(l,t,n,false):null!=n&&fe(t),y(r)&&se(l,t,r,false)}}function pe(e,t,n){S(t)&&(t=t.substr(1),n=true),n?e.el[t]="":e.el.removeAttribute(t)}function me(e,t,n,r){var l=e.el;null!=e.ns?l.setAttribute(t,n):"class"===t?l.className=n:"id"===t||"boolean"==typeof n||r?l[t]=n:"."===t[0]?l[t.substr(1)]=n:l.setAttribute(t,n)}function be(e,t){var n=e.attrs||i,r=t.attrs||i;if(n===r);else{for(var l in n){var u=n[l];if(null!=u){var a=M(e.tag,l),o=a?e.el[l]:r[l];n[l]=u=B(u,(q(e)||i)._stream),u===o||(E(l)?te(e,t):R(l)||(C(l)?he(e,l,u,o):me(e,l,u,a)))}}for(var l in r)null==n[l]&&(C(l)?he(e,l,n[l],r[l]):R(l)||pe(e,l,M(e.tag,l)))}}function ge(e,t,n,r){return e.type===u&&(t=e.data,n=e.key,r=e.opts,e=e.view),new et(e,t,n,r)}var ke=[];function we(e,t,n,r,l){if(null!=e){var u=n.hooks[t];if(u){if("d"!==t[0]||"i"!==t[1]||"d"!==t[2])return u(n,r);l?(I(n.parent),u(n,r)):ke.push([u,n,r])}}}function _e(e,t){if(ke.length){var n;t&&I(e.node);while(n=ke.shift())n[0](n[1],n[2])}}function xe(e,t){return null!=t?o.createElementNS(t,e):o.createElement(e)}function Ne(e){return o.createTextNode(e)}function Se(e){return o.createComment(e)}function Ce(e){return e.nextSibling}function Re(e){var t=e.vm,n=null!=t&&we(t.hooks,"willUnmount",t,t.data),r=we(e.hooks,"willRemove",e);if((e.flags&U)===U&&s(e.body))for(var l=0;l<e.body.length;l++)Re(e.body[l]);return n||r}function Ee(e,t){if(t){var n=e.vm;null!=n&&(n.node=n.refs=null)}var r=e.body;if(s(r))for(var l=0;l<r.length;l++)Ee(r[l],true)}function Ie(e,t,n){var r=t._node,l=r.vm;if(Ee(r,true),(r.flags&U)===U)for(var u=0;u<r.body.length;u++)Ie(t,r.body[u].el);delete t._node,e.removeChild(t),we(r.hooks,"didRemove",r,null,n),null!=l&&(we(l.hooks,"didUnmount",l,l.data,n),l.node=null)}function Oe(e,t){var n=t._node;if(!n._dead){var r=Re(n);null!=r&&h(r)?(n._dead=true,r.then(_(Ie,[e,t,true]))):Ie(e,t)}}function Me(e){var t=e.el;if(0==(e.flags&U))Ee(e,false),t.textContent=null;else{var n=t.firstChild;if(null!=n)do{var r=Ce(n);Oe(t,n)}while(n=r)}}function qe(e,t,n){var r=t._node,l=null!=t.parentNode,u=t!==n&&l?null:r.vm;null!=u&&we(u.hooks,"willMount",u,u.data),we(r.hooks,l?"willReinsert":"willInsert",r),e.insertBefore(t,n),we(r.hooks,l?"didReinsert":"didInsert",r),null!=u&&we(u.hooks,"didMount",u,u.data)}function Ae(e,t,n){qe(e,t,n?Ce(n):null)}function je(e){for(var t=0;t<e.body.length;t++){var n=e.body[t],r=n.type;if(r<=l)qe(e.el,Le(n));else if(r===u){r=(o=ge(n.view,n.data,n.key,n.opts)._redraw(e,t,false)).node.type,qe(e.el,Le(o.node))}else if(r===a){var o;(o=n.vm)._update(n.data,e,t,true,true),r=o.node.type,qe(e.el,o.node.el)}}}function Le(e,t){return null==e.el&&(e.type===n?(e.el=t||xe(e.tag,e.ns),null!=e.attrs&&be(e,i),(e.flags&H)===H&&e.body.body(e),s(e.body)?je(e):null!=e.body&&(e.el.textContent=e.body)):e.type===r?e.el=t||Ne(e.body):e.type===l&&(e.el=t||Se(e.body))),e.el._node=e,e.el}function Ve(e){return e.parent}var De=1,Te=2;function Ue(e,t,n,r,l,u,a,o){return function(i,f,s,d,c,v){var y,h;if(null!=d[r]){if(null==(y=d[r]._node))return void(d[r]=e(d[r]));if(Ve(y)!==i)return h=e(d[r]),null!=y.vm?y.vm.unmount(true):Oe(f,d[r]),void(d[r]=h)}if(d[l]==c)return Te;if(null==d[l].el)n(f,Le(d[l]),d[r]),d[l]=t(d[l],s);else if(d[l].el===d[r])d[l]=t(d[l],s),d[r]=e(d[r]);else{if(v||y!==d[a])return v&&null!=d[r]?ze(e,t,n,r,l,f,s,y,d):De;h=d[r],d[r]=e(h),o(f,h,d[u]),d[u]=h}}}function ze(e,t,n,r,l,u,a,o,i){if(o._lis)n(u,i[l].el,i[r]),i[l]=t(i[l],a);else{var f=N(o.idx,i.tombs);o._lis=true;var s=e(i[r]);n(u,i[r],null!=f?a[i.tombs[f]].el:f),null==f?i.tombs.push(o.idx):i.tombs.splice(f,0,o.idx),i[r]=s}}var Fe=Ue(Ce,function(e,t){return t[e.idx+1]},qe,"lftSib","lftNode","rgtSib","rgtNode",Ae),He=Ue(function(e){return e.previousSibling},function(e,t){return t[e.idx-1]},Ae,"rgtSib","rgtNode","lftSib","lftNode",qe);function Ge(e,t){var n=t.body,r=e.el,l=e.body,u={lftNode:l[0],rgtNode:l[l.length-1],lftSib:(n[0]||i).el,rgtSib:(n[n.length-1]||i).el};e:while(1){while(1){var a=Fe(e,r,l,u,null,false);if(a===De)break;if(a===Te)break e}while(1){var o=He(e,r,l,u,u.lftNode,false);if(o===De)break;if(o===Te)break e}We(e,r,l,u);break}}function We(e,t,n,r){var l=[],u=t.firstChild;do{var a=u._node;a.parent===e&&l.push(a.idx)}while(u=Ce(u));for(var o=x(l).map(function(e){return l[e]}),i=0;i<o.length;i++)n[o[i]]._lis=true;r.tombs=o;while(1){if(Fe(e,t,n,r,null,true)===Te)break}}function Be(e){return e.el._node.parent!==e.parent}function Pe(e,t,n){return t[n]}function Ye(e,t,n){for(;n<t.length;n++){var r=t[n];if(null!=r.vm){if(e.type===u&&r.vm.view===e.view&&r.vm.key===e.key||e.type===a&&r.vm===e.vm)return r}else if(!Be(r)&&e.tag===r.tag&&e.type===r.type&&e.key===r.key&&(e.flags&~U)==(r.flags&~U))return r}return null}function $e(e,t,n){if(null==t._keys){if(t[n].key===e.key)return t[n];for(var r={},l=0;l<t.length;l++)r[t[l].key]=l;t._keys=r}return t[t._keys[e.key]]}function Ke(e,t){we(t.hooks,"willRecycle",t,e);var n=e.el=t.el,l=t.body,u=e.body;if(n._node=e,e.type!==r||u===l){null==e.attrs&&null==t.attrs||be(e,t);var a=s(l),o=s(u),i=(e.flags&H)===H;a?o||i?Xe(e,t):u!==l&&(null!=u?n.textContent=u:Me(t)):o?(Me(t),je(e)):u!==l&&(null!=u&&null!=l?n.firstChild.nodeValue=u:n.textContent=u),we(t.hooks,"didRecycle",t,e)}else n.nodeValue=u}function Xe(e,t){var r=e.body,o=r.length,i=t.body,s=i.length,d=(e.flags&H)===H,c=(e.flags&z)===z,v=(e.flags&F)===F,y=!c&&e.type===n,h=true,p=0===s?f:v?$e:c||d?Pe:Ye;if(y&&0===o)return Me(t),void(d&&(e.body=[]));var m,b,g=0,k=false,w=0;if(d)var _={key:null},x=e.body=Array(o);for(var N=0;N<o;N++){if(d){var S=false;h&&(v&&(_.key=r.key(N)),m=p(_,i,w)),null!=m?(b=m.idx,r.diff.eq(N,m)?((C=m).parent=e,C.idx=N,C._lis=false):S=true):S=true,S&&((C=r.tpl(N)).type===u?C=null!=m?m.vm._update(C.data,e,N,true,true).node:ge(C.view,C.data,C.key,C.opts)._redraw(e,N,false).node:(Z(C,e,N),C._diff=r.diff.val(N,e),null!=m&&Ke(C,m))),x[N]=C}else{var C,R=(C=r[N]).type;if(R<=l)(m=h&&p(C,i,w))&&(Ke(C,m),b=m.idx);else if(R===u)(m=h&&p(C,i,w))?(b=m.idx,m.vm._update(C.data,e,N,true,true)):ge(C.view,C.data,C.key,C.opts)._redraw(e,N,false);else if(R===a){var E=C.vm,I=O(E);I&&E.node.parent!=t&&(E.unmount(true),I=false),E._update(C.data,e,N,I,true)}}if(null!=m&&(b===w?++w===s&&o>s&&(m=null,h=false):k=true,!v&&s>100&&k&&++g%10==0))while(w<s&&Be(i[w]))w++}y&&Ge(e,t)}var Ze=new Set,Je=0;function Qe(){Ze.forEach(function(e){if(null!=e.node){var t=e;while(t=t.parent())if(Ze.has(t))return;e.redraw(true)}}),ae(Ze),Ze.clear(),Je=0}function et(e,t,n,r){var l=this;l.view=e,l.data=t,l.key=n,r&&(l.opts=r,l.cfg(r));var u=d(e)?e:e.call(l,l,t,n,r);y(u)?l.render=u:(l.render=u.render,l.cfg(u)),l.init&&l.init.call(l,l,l.data,l.key,r)}function tt(e,t,n){return w(t,n)}function nt(e){var t=this;e.init&&(t.init=e.init),e.diff&&(y(e.diff)?t.diff={val:e.diff,eq:tt}:t.diff=e.diff),e.onevent&&(t.onevent=e.onevent),e.hooks&&(t.hooks=p(t.hooks||{},e.hooks)),e.onemit&&(t.onemit=p(t.onemit||{},e.onemit))}var rt=et.prototype={constructor:et,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,refs:null,render:null,mount:function(e,t){var n=this;t?(Me({el:e,flags:0}),n._redraw(null,null,false),e.nodeName.toLowerCase()!==n.node.tag?(Le(n.node),qe(e.parentNode,n.node.el,e),e.parentNode.removeChild(e)):qe(e.parentNode,Le(n.node,e),e)):(n._redraw(null,null),e&&qe(e,n.node.el));e&&_e(n,true);return n},unmount:function(e){Y(this._stream),this._stream=null;var t=this.node;Oe(t.el.parentNode,t.el),t.el=null,e||_e(this,true)},cfg:nt,config:nt,parent:function(){return q(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(e){return null==e&&(e=ue),e?this._redraw(null,null,O(this)):(Ze.add(this),0===Je&&(Je=requestAnimationFrame(Qe))),this},update:function(e,t){return null==t&&(t=ue),this._update(e,null,null,O(this),t),t||this.redraw(),this},_update:function(e,t,n,r,l){var u=this;null!=e&&u.data!==e&&(we(u.hooks,"willUpdate",u,e),u.data=e);return l?u._redraw(t,n,r):u},_redraw:function(e,t,n){var r,l,u=null==e,a=this,o=a.node&&a.node.el&&a.node.el.parentNode,i=null!=a.diff,f=a.node;null!=f&&u&&(e=f.parent,t=f.idx);if(i&&(l=a.diff.val(a,a.data,a.key,e,t),null!=f&&(r=f._diff,a.diff.eq(a,r,l))))return f._diff=l,lt(a,f,e,t);o&&we(a.hooks,"willRedraw",a,a.data);var s=a.render.call(a,a,a.data,a.key,e,t);i&&(s._diff=l);if(s===f)return lt(a,f,e,t);a.refs=null,null!=a.key&&s.key!==a.key&&(s.key=a.key);a.node=s,a._stream=[],e?(Z(s,e,t,a),e.body[t]=s):f&&f.parent?(Z(s,f.parent,f.idx,a),f.parent.body[f.idx]=s):Z(s,null,null,a);if(false!==n)if(f)if(f.tag!==s.tag||f.key!==s.key){f.vm=s.vm=null;var d=f.el.parentNode,c=Ce(f.el);Oe(d,f.el),qe(d,Le(s),c),f.el=s.el,s.vm=a}else Ke(s,f);else Le(s);B(a.data,a._stream),a._stream=P(a._stream,a),o&&we(a.hooks,"didRedraw",a,a.data),u&&o&&_e(a,true);return a}};function lt(e,t,n,r){return null!=n&&(n.body[r]=t,t.idx=r,t.parent=n,t._lis=false),e}function ut(e,t,n,r){var l,u;return null==n?d(t)?l=t:u=t:(l=t,u=n),G(e,l,u,r)}rt.onevent=f;var at="http://www.w3.org/2000/svg";function ot(e,t,n,r){this.view=e,this.data=t,this.key=n,this.opts=r}function it(e,t){this.vm=e,this.data=t}function ft(e,t,n){if(d(t)){var r=Object.create(e);r.attrs=p({},e.attrs),null!=t.class&&null!=e._class&&(t.class=e._class+" "+t.class);p(e.attrs,t);be(e,r),n&&I(e)}else{if(null!=e.vm)return;Z(t,e.parent,e.idx,null),e.parent.body[e.idx]=t,Ke(t,e),n&&I(t),_e(q(t),false)}}function st(e){var t,n,r=arguments,l=r.length;if(l>1){var u=1;d(r[1])&&(n=r[1],u=2),t=l!==u+1||r[u]instanceof A||r[u]instanceof ot||r[u]instanceof it?b(r,u):r[u]}return G(e,n,t)}function dt(e,t){var n=e.body;if(s(n))for(var r=0;r<n.length;r++){var l=n[r];null!=l.vm?t.push(l.vm):dt(l,t)}return t}function ct(e,t){e.el=t,t._node=e;var n=e.attrs;for(var r in n){var l=n[r],o=M(e.tag,r);E(r)||R(r)||(C(r)?he(e,r,l):null!=l&&o&&me(e,r,l,o))}if((e.flags&H)===H&&e.body.body(e),s(e.body)&&e.body.length>0){var i=t.firstChild,f=0,d=e.body[f];do{d.type===u?d=ge(d.view,d.data,d.key,d.opts)._redraw(e,f,false).node:d.type===a&&(d=d.vm.node||d.vm._update(d.data,e,f,false,true).node),ct(d,i)}while((i=i.nextSibling)&&(d=e.body[++f]));var c=e.vm;null!=c&&we(c.hooks,"willMount",c,c.data),we(e.hooks,"willInsert",e),we(e.hooks,"didInsert",e),null!=c&&we(c.hooks,"didMount",c,c.data)}}function vt(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function yt(e){var t="";for(var n in e)null!=e[n]&&(t+=vt(n)+": "+ee(n,e[n])+"; ");return t}function ht(e){return null==e?"":""+e}ot.prototype={constructor:ot,type:u,view:null,data:null,key:null,opts:null},it.prototype={constructor:it,type:a,vm:null,data:null},j.patch=function(e,t){ft(this,e,t)},rt.emit=function(e){var t=this,n=t,r=b(arguments,1).concat(n,n.data);do{var l=t.onemit,u=l?l[e]:null;if(u){u.apply(t,r);break}}while(t=t.parent());ne[e]&&ne[e].apply(t,r)},rt.onemit=null,rt.body=function(){return dt(this.node,[])},rt._stream=null;var pt={area:true,base:true,br:true,col:true,command:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};function mt(e){e=ht(e);for(var t=0,n="";t<e.length;t++)switch(e[t]){case"&":n+="&amp;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=e[t]}return n}function bt(e){e=ht(e);for(var t=0,n="";t<e.length;t++)n+='"'===e[t]?"&quot;":e[t];return n}function gt(e,t,n){for(var r="",l=0;l<e.length;l++)r+=wt(e[l],t,n,l);return r}var kt=".innerHTML";function wt(e,o,i,f){var d,c;switch(e.type){case u:d=ge(e.view,e.data,e.key,e.opts).html(o,i,f);break;case a:d=e.vm.html(o,i,f);break;case n:case t:if(null!=e.el&&null==e.tag){d=e.el.outerHTML;break}var v="";v+="<"+e.tag;var y=e.attrs,h=null!=y;if(h){for(var p in y)if(!(C(p)||S(p)||R(p)||false===o&&M(e.tag,p))){var m=y[p];"style"!==p||null==m?true===m?v+=" "+mt(p):false===m||null!=m&&(v+=" "+mt(p)+'="'+bt(m)+'"'):c="object"==typeof m?yt(m):m}null!=c&&(v+=' style="'+bt(c.trim())+'"')}if(null==e.body&&null!=e.ns&&"svg"!==e.tag)return v+"/>";v+=">",pt[e.tag]||(h&&null!=y[kt]?v+=y[kt]:s(e.body)?v+=gt(e.body,o,e):(e.flags&H)===H?(e.body.body(e),v+=gt(e.body,o,e)):v+=mt(e.body),v+="</"+e.tag+">"),d=v;break;case r:d=mt(e.body);break;case l:d="\x3c!--"+mt(e.body)+"--\x3e"}return d}rt.attach=function(e){var t=this;return null==t.node&&t._redraw(null,null,false),ct(t.node,e),_e(t,false),t},rt.html=function(e,t,n){null==this.node&&this._redraw(t,n,false);var r=wt(this.node,e,t,n);return ke.length=0,r},j.html=function(e,t,n){return wt(this,e,t,n)},e.FIXED_BODY=z,e.KEYED_LIST=F,e.VNode=A,e.ViewModel=et,e.cfg=oe,e.config=oe,e.createView=ge,e.defineComment=function(e){var t=new A;return t.type=l,t.body=e,t},e.defineElement=ut,e.defineElementSpread=st,e.defineSvgElement=function(e,t,n,r){var l=ut(e,t,n,r);return l.ns=at,l},e.defineSvgElementSpread=function(){var e=st.apply(null,arguments);return e.ns=at,e},e.defineText=L,e.defineView=function(e,t,n,r){return new ot(e,t,n,r)},e.injectElement=function(e){var n=new A;return n.type=t,n.el=n.key=e,n},e.injectView=function(e,t){return new it(e,t)},e.list=function(e,t,n){return new W(e,t,n)}});