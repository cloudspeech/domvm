// https://github.com/domvm/domvm (v3.4.7-dev, dev build)
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.domvm={})}(this,function(e){"use strict";var A=1,s=2,T=3,N=4,D=5,t="undefined"!=typeof window,n=t?document:{},o=(t?window:{}).requestAnimationFrame,i={};function R(){}var f=Array.isArray;function a(e){return null!=e&&e.constructor===Object}function l(e,t,n,r){e.splice.apply(e,[n,r].concat(t))}function u(e){var t=typeof e;return"string"===t||"number"===t}function d(e){return"function"==typeof e}function c(e){return"object"==typeof e&&d(e.then)}function v(e){for(var t=arguments,n=1;n<t.length;n++)for(var r in t[n])e[r]=t[n][r];return e}function r(e,t,n){var r;while(r=t.shift())0===t.length?e[r]=n:e[r]=e=e[r]||{}}function p(e,t){for(var n=[],r=t;r<e.length;r++)n.push(e[r]);return n}function y(e,t){for(var n in e)if(e[n]!==t[n])return false;return true}function m(e,t){var n=e.length;if(t.length!==n)return false;for(var r=0;r<n;r++)if(e[r]!==t[r])return false;return true}function h(e,t){return!(e===t||(f(e)?m(e,t):!!a(e)&&y(e,t)))}function g(e){if(!o)return e;var t,n,r;function l(){t=0,e.apply(n,r)}return function(){n=this,r=arguments,t||(t=o(l))}}function b(e,t,n){return function(){return e.apply(n,t)}}function w(e){for(var t,n,r,l=e.slice(),o=[0],a=0,u=0;u<e.length;++u){var i=e[u];if(-1!==i)if(e[r=o[a]]<i)l[u]=r,o[++a]=u;else{t=0,n=a;while(t<n)e[o[r=(t+n)/2|0]]<i?t=r+1:n=r;i<e[o[t]]&&(0<t&&(l[u]=o[t-1]),o[t]=u)}}n=o[a];while(0<=a)n=l[o[a--]=n];return o}function _(e,t){var n,r=0,l=t.length-1;if(l<=2147483647)while(r<=l){if(t[n=r+l>>1]===e)return n;t[n]<e?r=n+1:l=n-1}else while(r<=l){if(t[n=Math.floor((r+l)/2)]===e)return n;t[n]<e?r=n+1:l=n-1}return r==t.length?null:r}function k(e){return"."===e[0]}function E(e){return"o"===e[0]&&"n"===e[1]}function x(e){return"_"===e[0]}function C(e){return"style"===e}function M(e){e&&e.el&&e.el.offsetHeight}function S(e){return null!=e.node&&null!=e.node.el}function I(e,t){switch(t){case"value":case"checked":case"selected":return true}return false}function L(e){e=e||i;while(null==e.vm&&e.parent)e=e.parent;return e.vm}function O(){}var H=O.prototype={constructor:O,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_diff:null,_dead:false,_lis:false,idx:null,parent:null};function U(e){var t=new O;return t.type=s,t.body=e,t}H._class=null;var Y={},j=/\[(\w+)(?:=(\w+))?\]/g;function V(e){var t=Y[e];if(null==t){var n,r,l,o;Y[e]=t={tag:(n=e.match(/^[-\w]+/))?n[0]:"div",id:(r=e.match(/#([-\w]+)/))?r[1]:null,class:(l=e.match(/\.([-\w.]+)/))?l[1].replace(/\./g," "):null,attrs:null};while(o=j.exec(e))null==t.attrs&&(t.attrs={}),t.attrs[o[1]]=o[2]||""}return t}var F={warnings:true,verbose:true,mutations:true,DATA_REPLACED:function(e,t,n){if(d(e.view)&&1<e.view.length){return["A view's data was replaced. The data originally passed to the view closure during init is now stale. You may want to rely only on the data passed to render() or vm.data.",e,t,n]}},UNKEYED_INPUT:function(e){return["Unkeyed <input> detected. Consider adding a name, id, _key, or _ref attr to avoid accidental DOM recycling between different <input> types.",e]},UNMOUNTED_REDRAW:function(e){return["Invoking redraw() of an unmounted (sub)view may result in errors.",e]},INLINE_HANDLER:function(e,t,n){return["Anonymous event handlers get re-bound on each redraw, consider defining them outside of templates for better reuse.",e,t,n]},MISMATCHED_HANDLER:function(e,t,n){return["Patching of different event handler styles is not fully supported for performance reasons. Ensure that handlers are defined using the same style.",e,t,n]},SVG_WRONG_FACTORY:function(e){return["<svg> defined using domvm.defineElement. Use domvm.defineSvgElement for <svg> & child nodes.",e]},FOREIGN_ELEMENT:function(e){return["domvm stumbled upon an element in its DOM that it didn't create, which may be problematic. You can inject external elements into the vtree using domvm.injectElement.",e]},REUSED_ATTRS:function(e){return["Attrs objects may only be reused if they are truly static, as a perf optimization. Mutating & reusing them will have no effect on the DOM due to 0 diff.",e]},ADJACENT_TEXT:function(e,t,n){return["Adjacent text nodes will be merged. Consider concatentating them yourself in the template for improved perf.",e,t,n]},ARRAY_FLATTENED:function(e,t){return["Arrays within templates will be flattened. When they are leading or trailing, it's easy and more performant to just .concat() them in the template.",e,t]},ALREADY_HYDRATED:function(e){return["A child view failed to mount because it was already hydrated. Make sure not to invoke vm.redraw() or vm.update() on unmounted views.",e]},ATTACH_IMPLICIT_TBODY:function(e,t){return["<table><tr> was detected in the vtree, but the DOM will be <table><tbody><tr> after HTML's implicit parsing. You should create the <tbody> vnode explicitly to avoid SSR/attach() failures.",e,t]}};function P(e,t){if(F.warnings&&d(F[e])){var n=F[e].apply(null,t);n&&(n[0]=e+": "+(F.verbose?n[0]:""),console.warn.apply(console,n))}}var G=1,W=2,B=4,z=8;function K(e,t,n,r){var l=new O;l.type=A,l.flags=r||0,l.attrs=t||null;var o=V(e);e=o.tag;var a=null!=o.id,u=null!=o.class,i=null!=o.attrs;if(a||u||i){var s=l.attrs||{};if(a&&null==s.id&&(s.id=o.id),u&&(l._class=o.class,s.class=o.class+(null!=s.class?" "+s.class:"")),i)for(var f in o.attrs)null==s[f]&&(s[f]=o.attrs[f]);l.attrs=s}if(l.tag=e,null!=l.attrs){var d=l.attrs;null!=d._key&&(l.key=d._key),null!=d._ref&&(l.ref=d._ref),null!=d._hooks&&(l.hooks=d._hooks),null!=d._data&&(l.data=d._data),null!=d._flags&&(l.flags=d._flags),null==l.key&&(null!=l.ref?l.key=l.ref:null!=d.id?l.key=d.id:null!=d.name&&(l.key=d.name+("radio"===d.type||"checkbox"===d.type?d.value:"")))}return null!=n&&(l.body=n)instanceof X&&(l.flags=n.flags),"svg"===l.tag?setTimeout(function(){null==l.ns&&P("SVG_WRONG_FACTORY",[l])},16):/^(?:input|textarea|select|datalist|output)$/.test(l.tag)&&null==l.key&&P("UNKEYED_INPUT",[l]),l}function X(n,r,t){var l,o=this,a=n.length;o.flags=z,o.items=n,o.length=a,o.key=function(){return null},o.diff={val:function(e,t){return r.val(n[e],t)},cmp:function(e,t){return r.cmp(t._diff,o.diff.val(e))}},o.tpl=function(e){return l(n[e],e)},o.map=function(e){return l=e,o},o.body=function(e){for(var t=[],n=0;n<a;n++){var r=o.tpl(n);r.type!=N&&(r._diff=o.diff.val(n,e)),t.push(r)}e.body=t,ne(e)},null!=t&&(o.flags|=B,o.key=function(e){return t(n[e],e)}),d(r)&&(o.diff={val:function(e){return r(n[e])},cmp:function(e,t){return h(t._diff,o.diff.val(e))}})}var $=function(e){return e},q=R,J=R;function Z(e){$=e.val,q=e.on,J=e.off}function Q(e,t,n){r(e,("refs."+t).split("."),n)}function ee(e){while(e=e.parent)e.flags|=G}function te(e,t,n,r){if(e.type!==D&&e.type!==N){e.parent=t,e.idx=n,e.vm=r,null!=e.ref&&Q(L(e),e.ref,e);var l=e.hooks,o=r&&r.hooks;(l&&(l.willRemove||l.didRemove)||o&&(o.willUnmount||o.didUnmount))&&ee(e),f(e.body)?ne(e):""===e.body?e.body=null:(e.body=$(e.body,L(e)._stream),null==e.body||e.body instanceof X||(e.body=""+e.body))}}function ne(e){for(var t=e.body,n=0;n<t.length;n++){var r=t[n];false===r||null==r?t.splice(n--,1):f(r)?(0!==n&&n!==t.length-1||P("ARRAY_FLATTENED",[e,r]),l(t,r,n--,1)):(null==r.type&&(t[n]=r=U(""+r)),r.type===s?null==r.body||""===r.body?t.splice(n--,1):0<n&&t[n-1].type===s?(P("ADJACENT_TEXT",[e,t[n-1].body,r.body]),t[n-1].body+=r.body,t.splice(n--,1)):te(r,e,n,null):te(r,e,n,null))}}var re={animationIterationCount:true,boxFlex:true,boxFlexGroup:true,boxOrdinalGroup:true,columnCount:true,flex:true,flexGrow:true,flexPositive:true,flexShrink:true,flexNegative:true,flexOrder:true,gridRow:true,gridColumn:true,order:true,lineClamp:true,borderImageOutset:true,borderImageSlice:true,borderImageWidth:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,tabSize:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeDasharray:true,strokeDashoffset:true,strokeMiterlimit:true,strokeOpacity:true,strokeWidth:true};function le(e,t){return isNaN(t)||re[e]?t:t+"px"}function oe(e,t){var n=(e.attrs||i).style,r=t?(t.attrs||i).style:null;if(null==n||u(n))e.el.style.cssText=n;else{for(var l in n){var o=n[l];n[l]=o=$(o,L(e)._stream),(null==r||null!=o&&o!==r[l])&&(e.el.style[l]=le(l,o))}if(r)for(var a in r)null==n[a]&&(e.el.style[a]="")}}var ae={};function ue(e){v(ae,e)}var ie=R,se=false;var fe={};function de(e){fe[e]||(fe[e]=true,ve(n,e,me,true))}function ce(e,t,n,r){e.removeEventListener(t.slice(2),n,r)}function ve(e,t,n,r){e.addEventListener(t.slice(2),n,r)}function pe(e,t,n,r,l){var o,a,u=e.apply(l,t.concat([n,r,l,l.data]));if(o=l.onevent(n,r,l,l.data,t),a=ie.call(null,n,r,l,l.data,t),false===u||false===o||false===a)return n.preventDefault(),n.stopPropagation(),false}function ye(e,t){var n,r,l="on"+e,o=[];while(t)(r=t.attrs)&&(n=r[l])&&f(n)&&o.unshift(n),t=t.parent;return o}function me(e){var t=e.target._node;if(null!=t)for(var n=ye(e.type,t),r=L(t),l=0;l<n.length;l++){if(false===pe(n[l][0],n[l].slice(1),e,t,r))break}}function he(e,t,n,r){if(n!=r){d(n)&&d(r)&&r.name==n.name&&P("INLINE_HANDLER",[e,r,n]),null==r||null==n||f(r)==f(n)&&a(r)==a(n)&&d(r)==d(n)||P("MISMATCHED_HANDLER",[e,r,n]);var l=e.el;d(n)?ve(l,t,n,false):null!=n&&de(t),d(r)&&ce(l,t,r,false)}}function ge(e,t,n){k(t)&&(t=t.substr(1),n=true),n?e.el[t]="":e.el.removeAttribute(t)}function be(e,t,n,r){var l=e.el;null!=e.ns?l.setAttribute(t,n):"class"===t?l.className=n:"id"===t||"boolean"==typeof n||r?l[t]=n:"."===t[0]?l[t.substr(1)]=n:l.setAttribute(t,n)}function we(e,t){var n=e.attrs||i,r=t.attrs||i;if(n===r)P("REUSED_ATTRS",[e]);else{for(var l in n){var o=n[l];if(null!=o){var a=I(e.tag,l),u=a?e.el[l]:r[l];n[l]=o=$(o,(L(e)||i)._stream),o===u||(C(l)?oe(e,t):x(l)||(E(l)?he(e,l,o,u):be(e,l,o,a)))}}for(var l in r)null==n[l]&&(E(l)?he(e,l,n[l],r[l]):x(l)||ge(e,l,I(e.tag,l)))}}function _e(e,t,n,r){return e.type===N&&(t=e.data,n=e.key,r=e.opts,e=e.view),new et(e,t,n,r)}var ke=[];function Ee(e,t,n,r,l){if(null!=e){var o=n.hooks[t];if(o){if("d"!==t[0]||"i"!==t[1]||"d"!==t[2])return o(n,r);l?(M(n.parent),o(n,r)):ke.push([o,n,r])}}}function xe(e){if(ke.length){var t;M(e.node);while(t=ke.shift())t[0](t[1],t[2])}}function Ae(e,t){return null!=t?n.createElementNS(t,e):n.createElement(e)}function Te(e){return n.createTextNode(e)}function Ne(e){return n.createComment(e)}function De(e){return e.nextSibling}function Re(e){var t=e.vm,n=null!=t&&Ee(t.hooks,"willUnmount",t,t.data),r=Ee(e.hooks,"willRemove",e);if((e.flags&G)===G&&f(e.body))for(var l=0;l<e.body.length;l++)Re(e.body[l]);return n||r}function Ce(e,t){if(t){var n=e.vm;null!=n&&(n.node=n.refs=null)}var r=e.body;if(f(r))for(var l=0;l<r.length;l++)Ce(r[l],true)}function Me(e,t,n){var r=t._node,l=r.vm;if(Ce(r,true),(r.flags&G)===G)for(var o=0;o<r.body.length;o++)Me(t,r.body[o].el);delete t._node,e.removeChild(t),Ee(r.hooks,"didRemove",r,null,n),null!=l&&(Ee(l.hooks,"didUnmount",l,l.data,n),l.node=null)}function Se(e,t){var n=t._node;if(!n._dead){var r=Re(n);null!=r&&c(r)?(n._dead=true,r.then(b(Me,[e,t,true]))):Me(e,t)}}function Ie(e){var t=e.el;if(0==(e.flags&G))Ce(e,false),t.textContent=null;else{var n=t.firstChild;if(null!=n)do{var r=De(n);Se(t,n)}while(n=r)}}function Le(e,t,n){var r=t._node,l=null!=t.parentNode,o=t!==n&&l?null:r.vm;null!=o&&Ee(o.hooks,"willMount",o,o.data),Ee(r.hooks,l?"willReinsert":"willInsert",r),e.insertBefore(t,n),Ee(r.hooks,l?"didReinsert":"didInsert",r),null!=o&&Ee(o.hooks,"didMount",o,o.data)}function Oe(e,t,n){Le(e,t,n?De(n):null)}function He(e){for(var t=0;t<e.body.length;t++){var n=e.body[t],r=n.type;if(r<=T)Le(e.el,Ue(n));else if(r===N){r=(l=_e(n.view,n.data,n.key,n.opts)._redraw(e,t,false)).node.type,Le(e.el,Ue(l.node))}else if(r===D){var l;(l=n.vm)._update(n.data,e,t),r=l.node.type,Le(e.el,l.node.el)}}}function Ue(e,t){return null==e.el&&(e.type===A?(e.el=t||Ae(e.tag,e.ns),null!=e.attrs&&we(e,i),(e.flags&z)===z&&e.body.body(e),f(e.body)?He(e):null!=e.body&&(e.el.textContent=e.body)):e.type===s?e.el=t||Te(e.body):e.type===T&&(e.el=t||Ne(e.body))),(e.el._node=e).el}function Ye(e){return e.parent}var je=1,Ve=2;function Fe(i,s,f,d,c,v,p,y){return function(e,t,n,r,l,o){var a,u;if(null!=r[d]){if(null==(a=r[d]._node))return P("FOREIGN_ELEMENT",[r[d]]),void(r[d]=i(r[d]));if(Ye(a)!==e)return u=i(r[d]),null!=a.vm?a.vm.unmount(true):Se(t,r[d]),void(r[d]=u)}if(r[c]==l)return Ve;if(null==r[c].el)f(t,Ue(r[c]),r[d]),r[c]=s(r[c],n);else if(r[c].el===r[d])r[c]=s(r[c],n),r[d]=i(r[d]);else{if(o||a!==r[p])return null!=r[c].vm&&P("ALREADY_HYDRATED",[r[c].vm]),o&&null!=r[d]?Pe(i,s,f,d,c,t,n,a,r):je;u=r[d],r[d]=i(u),y(t,u,r[v]),r[v]=u}}}function Pe(e,t,n,r,l,o,a,u,i){if(u._lis)n(o,i[l].el,i[r]),i[l]=t(i[l],a);else{var s=_(u.idx,i.tombs);u._lis=true;var f=e(i[r]);n(o,i[r],null!=s?a[i.tombs[s]].el:s),null==s?i.tombs.push(u.idx):i.tombs.splice(s,0,u.idx),i[r]=f}}var Ge=Fe(De,function(e,t){return t[e.idx+1]},Le,"lftSib","lftNode","rgtSib","rgtNode",Oe),We=Fe(function(e){return e.previousSibling},function(e,t){return t[e.idx-1]},Oe,"rgtSib","rgtNode","lftSib","lftNode",Le);function Be(e,t){var n=t.body,r=e.el,l=e.body,o={lftNode:l[0],rgtNode:l[l.length-1],lftSib:(n[0]||i).el,rgtSib:(n[n.length-1]||i).el};e:while(1){while(1){var a=Ge(e,r,l,o,null,false);if(a===je)break;if(a===Ve)break e}while(1){var u=We(e,r,l,o,o.lftNode,false);if(u===je)break;if(u===Ve)break e}ze(e,r,l,o);break}}function ze(e,t,n,r){var l=[],o=t.firstChild;do{var a=o._node;a.parent===e&&l.push(a.idx)}while(o=De(o));for(var u=w(l).map(function(e){return l[e]}),i=0;i<u.length;i++)n[u[i]]._lis=true;r.tombs=u;while(1){if(Ge(e,t,n,r,null,true)===Ve)break}}function Ke(e){return e.el._node.parent!==e.parent}function Xe(e,t,n){return t[n]}function $e(e,t,n){for(;n<t.length;n++){var r=t[n];if(null!=r.vm){if(e.type===N&&r.vm.view===e.view&&r.vm.key===e.key||e.type===D&&r.vm===e.vm)return r}else if(!Ke(r)&&e.tag===r.tag&&e.type===r.type&&e.key===r.key&&(e.flags&~G)==(r.flags&~G))return r}return null}function qe(e,t,n){if(null==t._keys){if(t[n].key===e.key)return t[n];for(var r={},l=0;l<t.length;l++)r[t[l].key]=l;t._keys=r}return t[t._keys[e.key]]}function Je(e,t){Ee(t.hooks,"willRecycle",t,e);var n=e.el=t.el,r=t.body,l=e.body;if((n._node=e).type!==s||l===r){null==e.attrs&&null==t.attrs||we(e,t);var o=f(r),a=f(l),u=(e.flags&z)===z;o?a||u?Ze(e,t):l!==r&&(null!=l?n.textContent=l:Ie(t)):a?(Ie(t),He(e)):l!==r&&(null!=l&&null!=r?n.firstChild.nodeValue=l:n.textContent=l),Ee(t.hooks,"didRecycle",t,e)}else n.nodeValue=l}function Ze(e,t){var n=e.body,r=n.length,l=t.body,o=l.length,a=(e.flags&z)===z,u=(e.flags&W)===W,i=(e.flags&B)===B,s=!u&&e.type===A,f=true,d=0===o?R:i?qe:u||a?Xe:$e;if(s&&0===r)return Ie(t),void(a&&(e.body=[]));var c,v,p=0,y=false,m=0;if(a)var h={key:null},g=e.body=Array(r);for(var b=0;b<r;b++){if(a){var w=false;f&&(i&&(h.key=n.key(b)),c=d(h,l,m)),null!=c?(v=c.idx,n.diff.cmp(b,c)?w=true:((_=c).parent=e,_.idx=b,_._lis=false)):w=true,w&&((_=n.tpl(b)).type===N?_=null!=c?c.vm._update(_.data,e,b).node:_e(_.view,_.data,_.key,_.opts)._redraw(e,b,false).node:(te(_,e,b),_._diff=n.diff.val(b,e),null!=c&&Je(_,c))),g[b]=_}else{var _,k=(_=n[b]).type;if(k<=T)(c=f&&d(_,l,m))&&(Je(_,c),v=c.idx);else if(k===N)(c=f&&d(_,l,m))?(v=c.idx,c.vm._update(_.data,e,b)):_e(_.view,_.data,_.key,_.opts)._redraw(e,b,false);else if(k===D){var E=_.vm,x=S(E);x&&E.node.parent!=t&&(E.unmount(true),x=false),E._update(_.data,e,b,x)}}if(null!=c&&(v===m?++m===o&&o<r&&(c=null,f=false):y=true,!i&&100<o&&y&&++p%10==0))while(m<o&&Ke(l[m]))m++}s&&Be(e,t)}var Qe=null;function et(e,t,n,r){var l=this;l.view=e,l.data=t,l.key=n,r&&(l.opts=r,l.config(r));var o=a(e)?e:e.call(l,l,t,n,r);d(o)?l.render=o:(l.render=o.render,l.config(o)),l.init&&l.init.call(l,l,l.data,l.key,r)}function tt(e,t,n){return h(t,n)}F.mutations&&(Qe=new function(r){navigator.userAgent.indexOf("Edge");var e=-1!=navigator.userAgent.indexOf("Trident/"),t=Object.getOwnPropertyDescriptor,n=Object.defineProperty,l=Node.prototype,o=t(l,"textContent"),a=t(l,"nodeValue"),u=HTMLElement.prototype,i=t(u,"innerText"),s=Element.prototype,f=t(e?u:s,"innerHTML"),d=t(e?u:s,"className"),c=t(e?u:s,"id"),v=CSSStyleDeclaration.prototype,p=t(v,"cssText"),y=HTMLInputElement.prototype,m=HTMLTextAreaElement.prototype,h=HTMLSelectElement.prototype,g=HTMLOptionElement.prototype,b=t(y,"checked"),w=t(y,"value"),_=t(m,"value"),k=t(h,"value"),E=t(h,"selectedIndex"),x=t(g,"selected"),A={"document.createElement":null,"document.createElementNS":null,"document.createTextNode":null,"document.createComment":null,"document.createDocumentFragment":null,"DocumentFragment.prototype.insertBefore":null,"Element.prototype.appendChild":null,"Element.prototype.removeChild":null,"Element.prototype.insertBefore":null,"Element.prototype.replaceChild":null,"Element.prototype.remove":null,"Element.prototype.setAttribute":null,"Element.prototype.setAttributeNS":null,"Element.prototype.removeAttribute":null,"Element.prototype.removeAttributeNS":null},T={},N=null;function D(e){var t=e.split("."),n=window;while(1<t.length)n=n[t.shift()];return{ctx:n,last:t[0]}}for(var R in A){var C=D(R);null===A[R]&&(A[R]=C.ctx[C.last]),function(e,t){T[t]=0,C.ctx[t]=function(){return T[t]++,A[e].apply(this,arguments)}}(R,C.last)}function M(){for(var e in T)T[e]=0}T.textContent=0,n(l,"textContent",{set:function(e){T.textContent++,o.set.call(this,e)}}),T.nodeValue=0,n(l,"nodeValue",{set:function(e){T.nodeValue++,a.set.call(this,e)}}),T.innerText=0,n(u,"innerText",{set:function(e){T.innerText++,i.set.call(this,e)}}),T.innerHTML=0,n(e?u:s,"innerHTML",{set:function(e){T.innerHTML++,f.set.call(this,e)}}),T.className=0,n(e?u:s,"className",{set:function(e){T.className++,d.set.call(this,e)}}),T.cssText=0,n(v,"cssText",{set:function(e){T.cssText++,p.set.call(this,e)}}),T.id=0,n(e?u:s,"id",{set:function(e){T.id++,c.set.call(this,e)}}),T.checked=0,n(y,"checked",{set:function(e){T.checked++,b.set.call(this,e)}}),T.value=0,n(y,"value",{set:function(e){T.value++,w.set.call(this,e)}}),n(m,"value",{set:function(e){T.value++,_.set.call(this,e)}}),n(h,"value",{set:function(e){T.value++,k.set.call(this,e)}}),T.selectedIndex=0,n(h,"selectedIndex",{set:function(e){T.selectedIndex++,E.set.call(this,e)}}),T.selected=0,n(g,"selected",{set:function(e){T.selected++,x.set.call(this,e)}}),this.start=function(){N=+new Date},this.end=function(){var e=+new Date-N;N=null;var t={};for(var n in T)0<T[n]&&(t[n]=T[n]);return M(),r&&(t._time=e),t}}(true));var nt=et.prototype={constructor:et,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,refs:null,render:null,mount:function(e,t){var n=this;F.mutations&&Qe.start();t?(Ie({el:e,flags:0}),n._redraw(null,null,false),e.nodeName.toLowerCase()!==n.node.tag?(Ue(n.node),Le(e.parentNode,n.node.el,e),e.parentNode.removeChild(e)):Le(e.parentNode,Ue(n.node,e),e)):(n._redraw(null,null),e&&Le(e,n.node.el));e&&xe(n);F.mutations&&console.log(Qe.end());return n},unmount:function(e){J(this._stream),this._stream=null;var t=this.node;Se(t.el.parentNode,t.el),t.el=null,e||xe(this)},config:function(e){var t=this;e.init&&(t.init=e.init),e.diff&&d(e.diff)&&(t.diff={val:e.diff,cmp:tt}),e.onevent&&(t.onevent=e.onevent),e.hooks&&(t.hooks=v(t.hooks||{},e.hooks)),e.onemit&&(t.onemit=v(t.onemit||{},e.onemit))},parent:function(){return L(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(e){var t=this;return null==e&&(e=se),e?t._redraw(null,null,S(t)):(t._redrawAsync=t._redrawAsync||g(function(){return t.redraw(true)}))(),t},update:function(e,t){var n=this;return null==t&&(t=se),t?n._update(e,null,null,S(n)):(n._updateAsync=n._updateAsync||g(function(e){return n.update(e,true)}))(e),n},_update:function(e,t,n,r){var l=this;null!=e&&l.data!==e&&(P("DATA_REPLACED",[l,l.data,e]),Ee(l.hooks,"willUpdate",l,e),l.data=e);return l._redraw(t,n,r)},_redraw:function(e,t,n){var r=null==e,l=this,o=l.node&&l.node.el&&l.node.el.parentNode;r&&l.node&&l.node.el&&!l.node.el.parentNode&&P("UNMOUNTED_REDRAW",[l]);r&&F.mutations&&o&&Qe.start();var a,u,i=null!=l.diff,s=l.node;if(i&&(u=l.diff.val(l,l.data,l.key,e,t),null!=s&&(a=s._diff,!l.diff.cmp(l,a,u))))return rt(l,s,e,t);o&&Ee(l.hooks,"willRedraw",l,l.data);var f=l.render.call(l,l,l.data,l.key,e,t);i&&(f._diff=u);if(f===s)return rt(l,s,e,t);(l.refs=null)!=l.key&&f.key!==l.key&&(f.key=l.key);l.node=f,l._stream=[],e?(te(f,e,t,l),e.body[t]=f):s&&s.parent?(te(f,s.parent,s.idx,l),s.parent.body[s.idx]=f):te(f,null,null,l);if(false!==n)if(s)if(s.tag!==f.tag||s.key!==f.key){s.vm=f.vm=null;var d=s.el.parentNode,c=De(s.el);Se(d,s.el),Le(d,Ue(f),c),s.el=f.el,f.vm=l}else Je(f,s);else Ue(f);$(l.data,l._stream),l._stream=q(l._stream,l),o&&Ee(l.hooks,"didRedraw",l,l.data),r&&o&&xe(l);r&&F.mutations&&o&&console.log(Qe.end());return l}};function rt(e,t,n,r){return null!=n&&((n.body[r]=t).idx=r,t.parent=n,t._lis=false),e}function lt(e,t,n,r){var l,o;return null==n?a(t)?l=t:o=t:(l=t,o=n),K(e,l,o,r)}nt._redrawAsync=nt._updateAsync=null,nt.onevent=R;var ot="http://www.w3.org/2000/svg";function at(e,t,n,r){this.view=e,this.data=t,this.key=n,this.opts=r}function ut(e,t){this.vm=e,this.data=t}function it(e,t,n){if(a(t)){var r=Object.create(e);r.attrs=v({},e.attrs),null!=t.class&&null!=e._class&&(t.class=e._class+" "+t.class);v(e.attrs,t);we(e,r),n&&M(e)}else{if(null!=e.vm)return;te(t,e.parent,e.idx,null),Je(e.parent.body[e.idx]=t,e),n&&M(t),xe(L(t))}}function st(e){var t,n,r=arguments,l=r.length;if(1<l){var o=1;a(r[1])&&(n=r[1],o=2),t=l!==o+1||r[o]instanceof O||r[o]instanceof at||r[o]instanceof ut?p(r,o):r[o]}return K(e,n,t)}function ft(e,t){var n=e.body;if(f(n))for(var r=0;r<n.length;r++){var l=n[r];null!=l.vm?t.push(l.vm):ft(l,t)}return t}function dt(e,t){var n=((e.el=t)._node=e).attrs;for(var r in n){var l=n[r],o=I(e.tag,r);C(r)||x(r)||(E(r)?he(e,r,l):null!=l&&o&&be(e,r,l,o))}if((e.flags&z)===z&&e.body.body(e),f(e.body)&&0<e.body.length){var a=t.firstChild,u=0,i=e.body[u];do{i.type===N?i=_e(i.view,i.data,i.key,i.opts)._redraw(e,u,false).node:i.type===D&&(i=i.vm.node||i.vm._update(i.data,e,u,false).node),"table"===e.tag&&"tr"===i.tag&&P("ATTACH_IMPLICIT_TBODY",[e,i]),dt(i,a);var s=i.vm;null!=s&&Ee(s.hooks,"willMount",s,s.data),Ee(i.hooks,"willInsert",i),Ee(i.hooks,"didInsert",i),null!=s&&Ee(s.hooks,"didMount",s,s.data)}while((a=a.nextSibling)&&(i=e.body[++u]))}}function ct(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function vt(e){var t="";for(var n in e)null!=e[n]&&(t+=ct(n)+": "+le(n,e[n])+"; ");return t}function pt(e){return null==e?"":""+e}at.prototype={constructor:at,type:N,view:null,data:null,key:null,opts:null},ut.prototype={constructor:ut,type:D,vm:null,data:null},H.patch=function(e,t){it(this,e,t)},nt.emit=function(e){var t=this,n=t,r=p(arguments,1).concat(n,n.data);do{var l=t.onemit,o=l?l[e]:null;if(o){o.apply(t,r);break}}while(t=t.parent());ae[e]&&ae[e].apply(t,r)},nt.onemit=null,nt.body=function(){return ft(this.node,[])},nt._stream=null;var yt={area:true,base:true,br:true,col:true,command:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true};function mt(e){e=pt(e);for(var t=0,n="";t<e.length;t++)switch(e[t]){case"&":n+="&amp;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=e[t]}return n}function ht(e){e=pt(e);for(var t=0,n="";t<e.length;t++)n+='"'===e[t]?"&quot;":e[t];return n}function gt(e,t){for(var n="",r=0;r<e.length;r++)n+=wt(e[r],t);return n}var bt=".innerHTML";function wt(e,t){var n,r;switch(e.type){case N:n=_e(e.view,e.data,e.key,e.opts).html(t);break;case D:n=e.vm.html();break;case A:if(null!=e.el&&null==e.tag){n=e.el.outerHTML;break}var l="";l+="<"+e.tag;var o=e.attrs,a=null!=o;if(a){for(var u in o)if(!(E(u)||k(u)||x(u)||false===t&&I(e.tag,u))){var i=o[u];"style"!==u||null==i?true===i?l+=" "+mt(u)+'=""':false===i||null!=i&&(l+=" "+mt(u)+'="'+ht(i)+'"'):r="object"==typeof i?vt(i):i}null!=r&&(l+=' style="'+ht(r.trim())+'"')}if(null==e.body&&null!=e.ns&&"svg"!==e.tag)return l+"/>";l+=">",yt[e.tag]||(a&&null!=o[bt]?l+=o[bt]:f(e.body)?l+=gt(e.body,t):(e.flags&z)===z?(e.body.body(e),l+=gt(e.body,t)):l+=mt(e.body),l+="</"+e.tag+">"),n=l;break;case s:n=mt(e.body);break;case T:n="\x3c!--"+mt(e.body)+"--\x3e"}return n}nt.attach=function(e){var t=this;return null==t.node&&t._redraw(null,null,false),dt(t.node,e),xe(t),t},nt.html=function(e){null==this.node&&this._redraw(null,null,false);var t=wt(this.node,e);return ke.length=0,t},H.html=function(e){return wt(this,e)},e.DEVMODE=F,e.defineElementSpread=st,e.defineSvgElementSpread=function(){var e=st.apply(null,arguments);return e.ns=ot,e},e.ViewModel=et,e.VNode=O,e.createView=_e,e.defineElement=lt,e.defineSvgElement=function(e,t,n,r){var l=lt(e,t,n,r);return l.ns=ot,l},e.defineText=U,e.defineComment=function(e){var t=new O;return t.type=T,t.body=e,t},e.defineView=function(e,t,n,r){return new at(e,t,n,r)},e.injectView=function(e,t){return new ut(e,t)},e.injectElement=function(e){var t=new O;return t.type=A,t.el=t.key=e,t},e.list=function(e,t,n){return new X(e,t,n)},e.FIXED_BODY=W,e.KEYED_LIST=B,e.config=function(e){ie=e.onevent||ie,null!=e.syncRedraw&&(se=e.syncRedraw),e.onemit&&ue(e.onemit),e.stream&&Z(e.stream)}});