// https://github.com/leeoniya/domvm (3.x-dev, dev build)

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.domvm=t()}(this,function(){"use strict";function e(){}function t(e){return null!=e}function n(e){return null!=e&&e.constructor===Object}function r(e,t,n,r){e.splice.apply(e,[n,r].concat(t))}function l(e){return"function"==typeof e}function o(e){for(var t=arguments,n=1;n<t.length;n++)for(var r in t[n])e[r]=t[n][r];return e}function i(e,t){for(var n=[],r=t;r<e.length;r++)n.push(e[r]);return n}function a(e,t){for(var n in e)if(e[n]!==t[n])return!1;return!0}function u(e,t){var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function s(e){function t(){n=0,e.apply(r,l)}if(!ke)return e;var n,r,l;return function(){r=this,l=arguments,n||(n=ke(t))}}function d(e){return"o"===e[0]&&"n"===e[1]}function f(e){return"_"===e[0]}function c(e){return"style"===e}function h(e){e&&e.el&&e.el.offsetHeight}function v(e){return null!=e.node&&null!=e.node.el}function y(e,t){switch(t){case"value":case"checked":case"selected":return!0}return!1}function p(e){for(e=e||Ee;null==e.vm&&e.parent;)e=e.parent;return e.vm}function m(){}function g(e){var t=new m;return t.type=ye,t.body=e,t}function b(e,t){var n=De(e,function(e){n&&(null!=t.node&&t.redraw(),Re(n))});return Ne(e)}function _(e,t){var n=De(e,function(e){n&&null!=t.node&&t.redraw()});return n}function w(e,t){if(Me.warnings&&l(Me[e])){var n=Me[e].apply(null,t);n&&(n[0]=e+": "+(Me.verbose?n[0]:""),console.warn.apply(console,n))}}function k(e,n,r,l){var o=new m;o.type=ve,t(l)&&(o.flags=l),o.attrs=n;var i=function(e){var t=Ce[e];if(null==t){var n,r,l,o;for(Ce[e]=t={tag:(n=e.match(/^[-\w]+/))?n[0]:"div",id:(r=e.match(/#([-\w]+)/))?r[1]:null,class:(l=e.match(/\.([-\w.]+)/))?l[1].replace(/\./g," "):null,attrs:null};o=Se.exec(e);)null==t.attrs&&(t.attrs={}),t.attrs[o[1]]=o[2]||""}return t}(e);if(o.tag=i.tag,i.id||i.class||i.attrs){var a=o.attrs||{};if(i.id&&!t(a.id)&&(a.id=i.id),i.class&&(o._class=i.class,a.class=i.class+(t(a.class)?" "+a.class:"")),i.attrs)for(var u in i.attrs)t(a[u])||(a[u]=i.attrs[u]);o.attrs=a}var s=o.attrs;return t(s)&&(t(s._key)&&(o.key=s._key),t(s._ref)&&(o.ref=s._ref),t(s._hooks)&&(o.hooks=s._hooks),t(s._data)&&(o.data=s._data),t(s._flags)&&(o.flags=s._flags),t(o.key)||(t(o.ref)?o.key=o.ref:t(s.id)?o.key=s.id:t(s.name)&&(o.key=s.name+("radio"===s.type||"checkbox"===s.type?s.value:"")))),null!=r&&(o.body=r),"svg"===o.tag?setTimeout(function(){null==o.ns&&w("SVG_WRONG_FACTORY",[o])},16):/^(?:input|textarea|select|datalist|keygen|output)$/.test(o.tag)&&null==o.key&&w("UNKEYED_INPUT",[o]),o}function E(e,t,n,l){if(e.type!==ge&&e.type!==me){e.parent=t,e.idx=n,e.vm=l,null!=e.ref&&function(e,t,n){!function(e,t,n){for(var r;r=t.shift();)0===t.length?e[r]=n:e[r]=e=e[r]||{}}(e,["refs"].concat(t.split(".")),n)}(p(e),e.ref,e);var o=e.hooks,i=l&&l.hooks;(o&&(o.willRemove||o.didRemove)||i&&(i.willUnmount||i.didUnmount))&&function(e){for(;e=e.parent;)e.flags|=Le}(e),xe(e.body)?function(e){for(var t=e.body,n=0;n<t.length;n++){var l=t[n];!1===l||null==l?t.splice(n--,1):xe(l)?(0!==n&&n!==t.length-1||w("ARRAY_FLATTENED",[e,l]),r(t,l,n--,1)):(null==l.type&&(t[n]=l=g(""+l)),l.type===ye?null==l.body||""===l.body?t.splice(n--,1):n>0&&t[n-1].type===ye?(w("ADJACENT_TEXT",[e,t[n-1].body,l.body]),t[n-1].body+=l.body,t.splice(n--,1)):E(l,e,n,null):E(l,e,n,null))}}(e):Te(e.body)&&(e.body=b(e.body,p(e)))}}function x(e,t){return isNaN(t)||Ye[e]?t:t+"px"}function A(e,t){var n=(e.attrs||Ee).style,r=t?(t.attrs||Ee).style:null;if(null==n||function(e){var t=typeof e;return"string"===t||"number"===t}(n))e.el.style.cssText=n;else{for(var l in n){var o=n[l];Te(o)&&(o=b(o,p(e))),(null==r||null!=o&&o!==r[l])&&(e.el.style[l]=x(l,o))}if(r)for(var i in r)null==n[i]&&(e.el.style[i]="")}}function T(e,t,n,r,l){if(null!=e){var o=n.hooks[t];if(o){if("d"!==t[0]||"i"!==t[1]||"d"!==t[2])return o(n,r);l?h(n.parent)&&o(n,r):Ue.push([o,n,r])}}}function N(e){if(Ue.length){h(e.node);for(var t;t=Ue.shift();)t[0](t[1],t[2])}}function D(e){return e.nextSibling}function R(e){var t=e.vm,n=null!=t&&T(t.hooks,"willUnmount",t,t.data),r=T(e.hooks,"willRemove",e);if((e.flags&Le)===Le&&xe(e.body))for(var l=0;l<e.body.length;l++)R(e.body[l]);return n||r}function C(e,t,n){var r=t._node,l=r.vm;if(xe(r.body))if((r.flags&Le)===Le)for(var o=0;o<r.body.length;o++)C(t,r.body[o].el);else M(r);delete t._node,e.removeChild(t),T(r.hooks,"didRemove",r,null,n),null!=l&&(T(l.hooks,"didUnmount",l,l.data,n),l.node=null)}function S(e,t){var n=t._node;if(!n._dead){var r=R(n);null!=r&&function(e){return"object"==typeof e&&l(e.then)}(r)?(n._dead=!0,r.then(function(e,t,n){return function(){return e.apply(n,t)}}(C,[e,t,!0]))):C(e,t)}}function M(e){for(var t=e.body,n=0;n<t.length;n++){var r=t[n];delete r.el._node,null!=r.vm&&(r.vm.node=null),xe(r.body)&&M(r)}}function L(e){var t=e.el;if(0==(e.flags&Le))xe(e.body)&&M(e),t.textContent=null;else{var n=t.firstChild;do{var r=D(n);S(t,n)}while(n=r)}}function I(e,t,n){var r=t._node,l=null!=t.parentNode,o=t!==n&&l?null:r.vm;null!=o&&T(o.hooks,"willMount",o,o.data),T(r.hooks,l?"willReinsert":"willInsert",r),e.insertBefore(t,n),T(r.hooks,l?"didReinsert":"didInsert",r),null!=o&&T(o.hooks,"didMount",o,o.data)}function O(e,t,n){I(e,t,n?D(n):null)}function H(e,t,n){e[t]=n}function Y(e,t,n,r,l){var o=e.apply(l,t.concat([n,r,l,l.data]));l.onevent(n,r,l,l.data,t),je.call(null,n,r,l,l.data,t),!1===o&&(n.preventDefault(),n.stopPropagation())}function U(e){var t,n,r=function(e){for(;null==e._node;)e=e.parentNode;return e._node}(e.target),l=p(r),o=e.currentTarget._node.attrs["on"+e.type];if(xe(o))Y(t=o[0],n=o.slice(1),e,r,l);else for(var i in o)if(e.target.matches(i)){var a=o[i];xe(a)?(t=a[0],n=a.slice(1)):(t=a,n=[]),Y(t,n,e,r,l)}}function V(e,t,r,o){if(r!==o){l(r)&&l(o)&&o.name==r.name&&w("INLINE_HANDLER",[e,o,r]),null==o||null==r||xe(o)==xe(r)&&n(o)==n(r)&&l(o)==l(r)||w("MISMATCHED_HANDLER",[e,o,r]);var i=e.el;null==r||l(r)?H(i,t,r):null==o&&H(i,t,U)}}function j(e,t,n){"."===t[0]&&(t=t.substr(1),n=!0),n?e.el[t]="":e.el.removeAttribute(t)}function F(e,t,n,r,l){var o=e.el;null==n?!l&&j(e,t,!1):null!=e.ns?o.setAttribute(t,n):"class"===t?o.className=n:"id"===t||"boolean"==typeof n||r?o[t]=n:"."===t[0]?o[t.substr(1)]=n:o.setAttribute(t,n)}function P(e,t,n){var r=e.attrs||Ee,l=t.attrs||Ee;if(r===l)w("REUSED_ATTRS",[e]);else{for(var o in r){var i=r[o],a=y(e.tag,o),u=a?e.el[o]:l[o];Te(i)&&(r[o]=i=b(i,p(e))),i===u||(c(o)?A(e,t):f(o)||(d(o)?V(e,o,i,u):F(e,o,i,a,n)))}for(var o in l)!(o in r)&&!f(o)&&j(e,o,y(e.tag,o)||d(o))}}function G(e,t,n,r){return e.type===me&&(t=e.data,n=e.key,r=e.opts,e=e.view),new Q(e,t,n,r)}function W(e){for(var t=0;t<e.body.length;t++){var n=e.body[t],r=n.type;if(r<=pe)I(e.el,z(n));else if(r===me){r=(l=G(n.view,n.data,n.key,n.opts)._redraw(e,t,!1)).node.type,I(e.el,z(l.node))}else if(r===ge){var l;(l=n.vm)._redraw(e,t),r=l.node.type,I(e.el,l.node.el)}}}function z(e,t){return null==e.el&&(e.type===ve?(e.el=t||function(e,t){return null!=t?we.createElementNS(t,e):we.createElement(e)}(e.tag,e.ns),null!=e.attrs&&P(e,Ee,!0),(e.flags&He)===He&&e.body.body(e),xe(e.body)?W(e):null!=e.body&&""!==e.body&&(e.el.textContent=e.body)):e.type===ye?e.el=t||function(e){return we.createTextNode(e)}(e.body):e.type===pe&&(e.el=t||function(e){return we.createComment(e)}(e.body))),e.el._node=e,e.el}function B(e,t,n,r,l,o,i,a){return function(u,s,d,f,c,h){var v,y;if(null!=f[r]){if(null==(v=f[r]._node))return w("FOREIGN_ELEMENT",[f[r]]),void(f[r]=e(f[r]));if(function(e){return e.parent}(v)!==u)return y=e(f[r]),null!=v.vm?v.vm.unmount(!0):S(s,f[r]),void(f[r]=y)}if(f[l]==c)return Pe;if(null==f[l].el)n(s,z(f[l]),f[r]),f[l]=t(f[l],d);else if(f[l].el===f[r])f[l]=t(f[l],d),f[r]=e(f[r]);else{if(h||v!==f[i])return null!=f[l].vm&&w("ALREADY_HYDRATED",[f[l].vm]),h&&null!=f[r]?function(e,t,n,r,l,o,i,a,u){if(a._lis)n(o,u[l].el,u[r]),u[l]=t(u[l],i);else{var s=function(e,t){var n,r=0,l=t.length-1;if(l<=2147483647)for(;r<=l;){if(n=r+l>>1,t[n]===e)return n;t[n]<e?r=n+1:l=n-1}else for(;r<=l;){if(n=Math.floor((r+l)/2),t[n]===e)return n;t[n]<e?r=n+1:l=n-1}return r==t.length?null:r}(a.idx,u.tombs);a._lis=!0;var d=e(u[r]);n(o,u[r],null!=s?i[u.tombs[s]].el:s),null==s?u.tombs.push(a.idx):u.tombs.splice(s,0,a.idx),u[r]=d}}(e,t,n,r,l,s,d,v,f):Fe;y=f[r],f[r]=e(y),a(s,y,f[o]),f[o]=y}}}function K(e,t){var n=t.body,r=e.el,l=e.body,o={lftNode:l[0],rgtNode:l[l.length-1],lftSib:(n[0]||Ee).el,rgtSib:(n[n.length-1]||Ee).el};e:for(;;){for(;;){var i=Ge(e,r,l,o,null,!1);if(i===Fe)break;if(i===Pe)break e}for(;;){var a=We(e,r,l,o,o.lftNode,!1);if(a===Fe)break;if(a===Pe)break e}!function(e,t,n,r){for(var l=Array.prototype.slice.call(t.childNodes),o=[],i=0;i<l.length;i++){var a=l[i]._node;a.parent===e&&o.push(a.idx)}for(var u=function(e){var t=e.slice(),n=[];n.push(0);for(var r,l,o=0,i=e.length;o<i;++o){var a=n[n.length-1];if(e[a]<e[o])t[o]=a,n.push(o);else{for(r=0,l=n.length-1;r<l;){var u=(r+l)/2|0;e[n[u]]<e[o]?r=u+1:l=u}e[o]<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(l=n[(r=n.length)-1];r-- >0;)n[r]=l,l=t[l];return n}(o).map(function(e){return o[e]}),s=0;s<u.length;s++)n[u[s]]._lis=!0;r.tombs=u;for(;;){var d=Ge(e,t,n,r,null,!0);if(d===Pe)break}}(e,r,l,o);break}}function X(e){return e.el._node.parent!==e.parent}function $(e,t,n){return t[n]}function q(e,t,n){for(;n<t.length;n++){var r=t[n];if(null!=r.vm){if(e.type===me&&r.vm.view===e.view&&r.vm.key===e.key||e.type===ge&&r.vm===e.vm)return r}else if(!X(r)&&e.tag===r.tag&&e.type===r.type&&e.key===r.key&&(e.flags&~Le)==(r.flags&~Le))return r}return null}function J(e,t,n){return t[t._keys[e.key]]}function Z(e,t){T(t.hooks,"willRecycle",t,e);var n=e.el=t.el,r=t.body,l=e.body;if(n._node=e,e.type!==ye||l===r){null==e.attrs&&null==t.attrs||P(e,t,!1);var o=xe(r),i=xe(l),a=(e.flags&He)===He;o?i||a?function(e,t){var n=e.body,r=n.length,l=t.body,o=l.length,i=(e.flags&He)===He,a=(e.flags&Ie)===Ie,u=(e.flags&Oe)===Oe,s=!a&&e.type===ve,d=!0,f=u?J:a||i?$:q;if(u){for(var c={},h=0;h<l.length;h++)c[l[h].key]=h;l._keys=c}if(s&&0===r)return L(t),void(i&&(e.body=[]));var y,p,m=0,g=!1,b=0;if(i)var _={key:null},w=Array(r);for(var h=0;h<r;h++){if(i){var k=!1,x=null;d&&(u&&(_.key=n.key(h)),y=f(_,l,b)),null!=y?(p=y.idx,!0===(x=n.diff(h,y))?((A=y).parent=e,A.idx=h,A._lis=!1):k=!0):k=!0,k&&(E(A=n.tpl(h),e,h),A._diff=null!=x?x:n.diff(h),null!=y&&Z(A,y)),w[h]=A}else{var A=n[h],T=A.type;if(T<=pe)(y=d&&f(A,l,b))&&(Z(A,y),p=y.idx);else if(T===me){if(y=d&&f(A,l,b)){p=y.idx;var N=y.vm._update(A.data,e,h)}else var N=G(A.view,A.data,A.key,A.opts)._redraw(e,h,!1);T=N.node.type}else if(T===ge){var D=v(A.vm),N=A.vm._update(A.data,e,h,D);T=N.node.type}}if(!u&&null!=y&&(p===b?++b===o&&r>o&&(y=null,d=!1):g=!0,o>100&&g&&++m%10==0))for(;b<o&&X(l[b]);)b++}i&&(e.body=w);s&&K(e,t)}(e,t):l!==r&&(null!=l?n.textContent=l:L(t)):i?(L(t),W(e)):l!==r&&(n.firstChild?n.firstChild.nodeValue=l:n.textContent=l),T(t.hooks,"didRecycle",t,e)}else n.nodeValue=l}function Q(e,t,r,o){var i=this;i.view=e,i.data=t,i.key=r,Te(t)&&(i._stream=_(t,i)),o&&(i.opts=o,i.config(o));var a=n(e)?e:e.call(i,i,t,r,o);l(a)?i.render=a:(i.render=a.render,i.config(a)),i._redrawAsync=s(function(e){return i.redraw(!0)}),i._updateAsync=s(function(e){return i.update(e,!0)}),i.init&&i.init.call(i,i,i.data,i.key,o)}function ee(e,t,n,r){return null!=n&&(n.body[r]=t,t.idx=r,t.parent=n,t._lis=!1),e}function te(e,t,r,l){var o,i;return null==r?n(t)?o=t:i=t:(o=t,i=r),k(e,o,i,l)}function ne(e,t,n,r){this.view=e,this.data=t,this.key=n,this.opts=r}function re(e){this.vm=e}function le(e,t){var n=e.body;if(xe(n))for(var r=0;r<n.length;r++){var l=n[r];null!=l.vm?t.push(l.vm):le(l,t)}return t}function oe(e){var t,r,l=arguments,o=l.length;if(o>1){var a=1;n(l[1])&&(r=l[1],a=2),t=o!==a+1||l[a]instanceof m||l[a]instanceof ne||l[a]instanceof re?i(l,a):l[a]}return k(e,r,t)}function ie(e,t){e.el=t,t._node=e;var n=e.attrs;for(var r in n){var l=n[r],o=y(e.tag,r);c(r)||f(r)||(d(r)?V(e,r,l):null!=l&&o&&F(e,r,l,o))}if((e.flags&He)===He&&e.body.body(e),xe(e.body)&&e.body.length>0){var i=t.firstChild,a=0,u=e.body[a];do{u.type===me?u=G(u.view,u.data,u.key,u.opts)._redraw(e,a,!1).node:u.type===ge&&(u=u.node||u._redraw(e,a,!1).node),"table"===e.tag&&"tr"===u.tag&&w("ATTACH_IMPLICIT_TBODY",[e,u]),ie(u,i)}while((i=i.nextSibling)&&(u=e.body[++a]))}}function ae(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ue(e){var t="";for(var n in e)null!=e[n]&&(t+=ae(n)+": "+x(n,e[n])+"; ");return t}function se(e){return null==e?"":""+e}function de(e){e=se(e);for(var t=0,n="";t<e.length;t++)switch(e[t]){case"&":n+="&amp;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=e[t]}return n}function fe(e){e=se(e);for(var t=0,n="";t<e.length;t++)n+='"'===e[t]?"&quot;":e[t];return n}function ce(e,t){for(var n="",r=0;r<e.length;r++)n+=he(e[r],t);return n}function he(e,t){var n,r;switch(e.type){case me:n=G(e.view,e.data,e.key,e.opts).html(t);break;case ge:n=e.vm.html();break;case ve:if(null!=e.el&&null==e.tag){n=e.el.outerHTML;break}var l="";l+="<"+e.tag;var o=e.attrs,i=null!=o;if(i){for(var a in o)if(!(d(a)||"."===a[0]||"_"===a[0]||!1===t&&y(e.tag,a))){var u=o[a];"style"!==a||null==u?!0===u?l+=" "+de(a)+'=""':!1===u||null!=u&&(l+=" "+de(a)+'="'+fe(u)+'"'):r="object"==typeof u?ue(u):u}null!=r&&(l+=' style="'+fe(r.trim())+'"')}if(null==e.body&&null!=e.ns&&"svg"!==e.tag)return l+"/>";l+=">",$e[e.tag]||(i&&null!=o[qe]?l+=o[qe]:xe(e.body)?l+=ce(e.body,t):(e.flags&He)===He?(e.body.body(e),l+=ce(e.body,t)):l+=de(e.body),l+="</"+e.tag+">"),n=l;break;case ye:n=de(e.body);break;case pe:n="\x3c!--"+de(e.body)+"--\x3e"}return n}var ve=1,ye=2,pe=3,me=4,ge=5,be="undefined"!=typeof window,_e=be?window:{},we=be?document:{},ke=_e.requestAnimationFrame,Ee={},xe=Array.isArray,Ae=m.prototype={constructor:m,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null},Te=function(){return!1},Ne=e,De=e,Re=e,Ce={},Se=/\[(\w+)(?:=(\w+))?\]/g,Me={syncRedraw:!1,warnings:!0,verbose:!0,mutations:!0,DATA_REPLACED:function(e,t,n){if(l(e.view)&&e.view.length>1){return["A view's data was replaced. The data originally passed to the view closure during init is now stale. You may want to rely only on the data passed to render() or vm.data.",e,t,n]}},UNKEYED_INPUT:function(e){return["Unkeyed <input> detected. Consider adding a name, id, _key, or _ref attr to avoid accidental DOM recycling between different <input> types.",e]},UNMOUNTED_REDRAW:function(e){return["Invoking redraw() of an unmounted (sub)view may result in errors.",e]},INLINE_HANDLER:function(e,t,n){return["Anonymous event handlers get re-bound on each redraw, consider defining them outside of templates for better reuse.",e,t,n]},MISMATCHED_HANDLER:function(e,t,n){return["Patching of different event handler styles is not fully supported for performance reasons. Ensure that handlers are defined using the same style.",e,t,n]},SVG_WRONG_FACTORY:function(e){return["<svg> defined using domvm.defineElement. Use domvm.defineSvgElement for <svg> & child nodes.",e]},FOREIGN_ELEMENT:function(e){return["domvm stumbled upon an element in its DOM that it didn't create, which may be problematic. You can inject external elements into the vtree using domvm.injectElement.",e]},REUSED_ATTRS:function(e){return["Attrs objects may only be reused if they are truly static, as a perf optimization. Mutating & reusing them will have no effect on the DOM due to 0 diff.",e]},ADJACENT_TEXT:function(e,t,n){return["Adjacent text nodes will be merged. Consider concatentating them yourself in the template for improved perf.",e,t,n]},ARRAY_FLATTENED:function(e,t){return["Arrays within templates will be flattened. When they are leading or trailing, it's easy and more performant to just .concat() them in the template.",e,t]},ALREADY_HYDRATED:function(e){return["A child view failed to mount because it was already hydrated. Make sure not to invoke vm.redraw() or vm.update() on unmounted views.",e]},ATTACH_IMPLICIT_TBODY:function(e,t){return["<table><tr> was detected in the vtree, but the DOM will be <table><tbody><tr> after HTML's implicit parsing. You should create the <tbody> vnode explicitly to avoid SSR/attach() failures.",e,t]}},Le=1,Ie=2,Oe=4,He=8,Ye={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ue=[],Ve={},je=e,Fe=1,Pe=2,Ge=B(D,function(e,t){return t[e.idx+1]},I,"lftSib","lftNode","rgtSib","rgtNode",O),We=B(function(e){return e.previousSibling},function(e,t){return t[e.idx-1]},O,"rgtSib","rgtNode","lftSib","lftNode",I),ze=null;Me.mutations&&(ze=new function(e){function t(e){for(var t=e.split("."),n=win;t.length>1;)n=n[t.shift()];return{ctx:n,last:t[0]}}navigator.userAgent.indexOf("Edge");var n=-1!==navigator.userAgent.indexOf("Trident/"),r=Object.getOwnPropertyDescriptor,l=Object.defineProperty,o=Node.prototype,i=r(o,"textContent"),a=r(o,"nodeValue"),u=HTMLElement.prototype,s=r(u,"innerText"),d=Element.prototype,f=r(n?u:d,"innerHTML"),c=r(n?u:d,"className"),h=r(n?u:d,"id"),v=CSSStyleDeclaration.prototype,y=r(v,"cssText"),p=HTMLInputElement.prototype,m=HTMLTextAreaElement.prototype,g=HTMLSelectElement.prototype,b=HTMLOptionElement.prototype,_=r(p,"checked"),w=r(p,"value"),k=r(m,"value"),E=r(g,"value"),x=r(g,"selectedIndex"),A=r(b,"selected"),T={"document.createElement":null,"document.createElementNS":null,"document.createTextNode":null,"document.createComment":null,"document.createDocumentFragment":null,"DocumentFragment.prototype.insertBefore":null,"Element.prototype.appendChild":null,"Element.prototype.removeChild":null,"Element.prototype.insertBefore":null,"Element.prototype.replaceChild":null,"Element.prototype.remove":null,"Element.prototype.setAttribute":null,"Element.prototype.setAttributeNS":null,"Element.prototype.removeAttribute":null,"Element.prototype.removeAttributeNS":null},N={},D=null;for(var R in T){var C=t(R);null===T[R]&&(T[R]=C.ctx[C.last]),function(e,t){N[t]=0,C.ctx[t]=function(){return N[t]++,T[e].apply(this,arguments)}}(R,C.last)}N.textContent=0,l(o,"textContent",{set:function(e){N.textContent++,i.set.call(this,e)}}),N.nodeValue=0,l(o,"nodeValue",{set:function(e){N.nodeValue++,a.set.call(this,e)}}),N.innerText=0,l(u,"innerText",{set:function(e){N.innerText++,s.set.call(this,e)}}),N.innerHTML=0,l(n?u:d,"innerHTML",{set:function(e){N.innerHTML++,f.set.call(this,e)}}),N.className=0,l(n?u:d,"className",{set:function(e){N.className++,c.set.call(this,e)}}),N.cssText=0,l(v,"cssText",{set:function(e){N.cssText++,y.set.call(this,e)}}),N.id=0,l(n?u:d,"id",{set:function(e){N.id++,h.set.call(this,e)}}),N.checked=0,l(p,"checked",{set:function(e){N.checked++,_.set.call(this,e)}}),N.value=0,l(p,"value",{set:function(e){N.value++,w.set.call(this,e)}}),l(m,"value",{set:function(e){N.value++,k.set.call(this,e)}}),l(g,"value",{set:function(e){N.value++,E.set.call(this,e)}}),N.selectedIndex=0,l(g,"selectedIndex",{set:function(e){N.selectedIndex++,x.set.call(this,e)}}),N.selected=0,l(b,"selected",{set:function(e){N.selected++,A.set.call(this,e)}}),this.start=function(){D=+new Date},this.end=function(){var t=+new Date-D;D=null;var n={};for(var r in N)N[r]>0&&(n[r]=N[r]);return function(){for(var e in N)N[e]=0}(),e&&(n._time=t),n}}(!0));var Be=Q.prototype={constructor:Q,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:e,refs:null,render:null,mount:function(e,t){return Me.mutations&&ze.start(),t?(L({el:e,flags:0}),this._redraw(null,null,!1),e.nodeName.toLowerCase()!==this.node.tag?(z(this.node),I(e.parentNode,this.node.el,e),e.parentNode.removeChild(e)):I(e.parentNode,z(this.node,e),e)):(this._redraw(null,null),e&&I(e,this.node.el)),e&&N(this),Me.mutations&&console.log(ze.end()),this},unmount:function(e){Te(this._stream)&&Re(this._stream);var t=this.node;S(t.el.parentNode,t.el),e||N(this)},config:function(e){e.init&&(this.init=e.init),e.diff&&(this.diff=e.diff),e.onevent&&(this.onevent=e.onevent),e.hooks&&(this.hooks=o(this.hooks||{},e.hooks)),e.onemit&&(this.onemit=o(this.onemit||{},e.onemit))},parent:function(){return p(this.node.parent)},root:function(){for(var e=this.node;e.parent;)e=e.parent;return e.vm},redraw:function(e){Me.syncRedraw&&(e=!0);return e?this._redraw(null,null,v(this)):this._redrawAsync(),this},update:function(e,t){Me.syncRedraw&&(t=!0);return t?this._update(e,null,null,v(this)):this._updateAsync(e),this},_update:function(e,t,n,r){return null!=e&&this.data!==e&&(w("DATA_REPLACED",[this,this.data,e]),T(this.hooks,"willUpdate",this,e),this.data=e,Te(this._stream)&&Re(this._stream),Te(e)&&(this._stream=_(e,this))),this._redraw(t,n,r)},_redraw:function(e,t,n){var r=null==e,l=this.node&&this.node.el&&this.node.el.parentNode;r&&this.node&&this.node.el&&!this.node.el.parentNode&&w("UNMOUNTED_REDRAW",[this]),r&&Me.mutations&&l&&ze.start();var o,i,s=this.node;if(null!=this.diff&&(o=this._diff,this._diff=i=this.diff(this,this.data),null!=s)){var d=xe(o)?u:a;if(o===i||d(o,i))return ee(this,s,e,t)}l&&T(this.hooks,"willRedraw",this,this.data);var f=this.render.call(this,this,this.data,o,i);if(f===s)return ee(this,s,e,t);if(this.refs=null,null!=this.key&&f.key!==this.key&&(f.key=this.key),this.node=f,e?(E(f,e,t,this),e.body[t]=f):s&&s.parent?(E(f,s.parent,s.idx,this),s.parent.body[s.idx]=f):E(f,null,null,this),!1!==n)if(s)if(s.tag!==f.tag||s.key!==f.key){s.vm=f.vm=null;var c=s.el.parentNode,h=D(s.el);S(c,s.el),I(c,z(f),h),s.el=f.el,f.vm=this}else Z(f,s);else z(f);return l&&T(this.hooks,"didRedraw",this,this.data),r&&l&&N(this),r&&Me.mutations&&l&&console.log(ze.end()),this},_redrawAsync:null,_updateAsync:null},Ke="http://www.w3.org/2000/svg";ne.prototype={constructor:ne,type:me,view:null,data:null,key:null,opts:null},re.prototype={constructor:re,type:ge,vm:null};var Xe={config:function(e){je=e.onevent||je,e.onemit&&function(e){o(Ve,e)}(e.onemit),e.stream&&function(e){Te=e.is,Ne=e.val,De=e.sub,Re=e.unsub}(e.stream)},ViewModel:Q,VNode:m,createView:G,defineElement:te,defineSvgElement:function(e,t,n,r){var l=te(e,t,n,r);return l.ns=Ke,l},defineText:g,defineComment:function(e){var t=new m;return t.type=pe,t.body=e,t},defineView:function(e,t,n,r){return new ne(e,t,n,r)},injectView:function(e){return new re(e)},injectElement:function(e){var t=new m;return t.type=ve,t.el=t.key=e,t},lazyList:function(e,t){var n=e.length,r={items:e,length:n,key:function(n){return t.key(e[n],n)},diff:function(n,r){var l=t.diff(e[n],n);if(null==r)return l;var o=r._diff;return(l===o||xe(o)?u(l,o):a(l,o))||l},tpl:function(n){return t.tpl(e[n],n)},map:function(e){return t.tpl=e,r},body:function(e){for(var t=Array(n),l=0;l<n;l++){var o=r.tpl(l);o._diff=r.diff(l),t[l]=o,E(o,e,l)}e.body=t}};return r},FIXED_BODY:Ie,DEEP_REMOVE:Le,KEYED_LIST:Oe,LAZY_LIST:He};Ae.patch=function(e,t){!function(e,t,n){if(null!=t.type){if(null!=e.vm)return;E(t,e.parent,e.idx,null),e.parent.body[e.idx]=t,Z(t,e),n&&h(t),N(p(t))}else{var r=Object.create(e);r.attrs=o({},e.attrs);var l=o(e.attrs,t);if(null!=e._class){var i=l.class;l.class=null!=i&&""!==i?e._class+" "+i:e._class}P(e,r),n&&h(e)}}(this,e,t)},Be.emit=function(e){var t=this,n=t,r=i(arguments,1).concat(n,n.data);do{var l=t.onemit,o=l?l[e]:null;if(o){o.apply(t,r);break}}while(t=t.parent());Ve[e]&&Ve[e].apply(t,r)},Be.onemit=null,Be.body=function(){return le(this.node,[])},Xe.defineElementSpread=oe,Xe.defineSvgElementSpread=function(){var e=oe.apply(null,arguments);return e.ns=Ke,e},Be._stream=null;var $e={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},qe=".innerHTML";return Be.attach=function(e){return null==this.node&&this._redraw(null,null,!1),ie(this.node,e),this},Be.html=function(e){return null==this.node&&this._redraw(null,null,!1),he(this.node,e)},Ae.html=function(e){return he(this,e)},Xe.DEVMODE=Me,Xe});