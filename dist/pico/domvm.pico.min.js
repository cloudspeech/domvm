// https://github.com/domvm/domvm (v3.4.8-dev, pico build)
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.domvm={})}("undefined"!=typeof self?self:this,function(e){"use strict";var n=0,t=1,l=2,r=3,i=4,u=5,o="undefined"!=typeof window?document:{},a={};function f(){}var d=Array.isArray;function s(e){return null!=e&&e.constructor===Object}function c(e,n,t,l){e.splice.apply(e,[t,l].concat(n))}function v(e){var n=typeof e;return"string"===n||"number"===n}function y(e){return"function"==typeof e}function p(e){return"object"==typeof e&&y(e.then)}function h(e){for(var n=arguments,t=1;t<n.length;t++)for(var l in n[t])e[l]=n[t][l];return e}function b(e,n,t){var l;while(l=n.shift())0===n.length?e[l]=t:e[l]=e=e[l]||{}}function w(e,n,t){return function(){return e.apply(t,n)}}function g(e){var n=e.slice(),t=[];t[0]=0;for(var l,r,i,u=0,o=0;o<e.length;++o){var a=e[o];if(e[i=t[u]]<a)n[o]=i,t[++u]=o;else{l=0,r=u;while(l<r)e[t[i=l+r>>1]]<a?l=i+1:r=i;a<e[t[l]]&&(l>0&&(n[o]=t[l-1]),t[l]=o)}}r=t[u];while(u>=0)t[u--]=r,r=n[r];return t}function k(e,n){var t,l=0,r=n.length-1;if(r<=2147483647)while(l<=r){if(n[t=l+r>>1]===e)return t;n[t]<e?l=t+1:r=t-1}else while(l<=r){if(n[t=Math.floor((l+r)/2)]===e)return t;n[t]<e?l=t+1:r=t-1}return l==n.length?null:l}function m(e){return"o"===e[0]&&"n"===e[1]}function _(e){return"style"===e}function x(e){e&&e.el&&e.el.offsetHeight}function N(e){return null!=e.node&&null!=e.node.el}function R(e,n){switch(n){case"value":case"checked":case"selected":return true}return false}function C(e){e=e||a;while(null==e.vm&&e.parent)e=e.parent;return e.vm}function S(){}function E(e){var n=new S;return n.type=l,n.body=e,n}h(S.prototype={constructor:S,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_diff:null,_dead:false,_lis:false,idx:null,parent:null},{a:function(e){return this.attrs=e,this},b:function(e){return this.body=e,this},k:function(e){return this.key=e,this},r:function(e){return this.ref=e,this},h:function(e){return this.hooks=e,this},f:function(e){return this.flags=e,this},d:function(e){return this.data=e,this}});var V=1,A=2,j=4,U=8;function q(e,n,l,r){var i=new S;return i.type=t,i.flags=r||0,i.attrs=n||null,i.tag=e,null!=l&&(i.body=l,l instanceof D&&(i.flags=l.flags)),i}function D(e,n,t){var l,r=this,u=e.length;r.flags=U,r.items=e,r.length=u,r.key=function(){return null},r.diff={val:function(t,l){return n.val(e[t],l)},eq:function(e,t){return n.eq(t._diff,r.diff.val(e))}},r.tpl=function(n){return l(e[n],n)},r.map=function(e){return l=e,r},r.body=function(e){for(var n=[],t=0;t<u;t++){var l=r.tpl(t);l.type!=i&&(l._diff=r.diff.val(t,e)),n.push(l)}e.body=n,T(e)},null!=t&&(r.flags|=j,r.key=function(n){return t(e[n],n)})}function I(e,n,t){b(e,("refs."+n).split("."),t)}function L(e){while(e=e.parent)e.flags|=V}function M(e,n,t,l){if(e.type!==u&&e.type!==i){e.parent=n,e.idx=t,e.vm=l,null!=e.ref&&I(C(e),e.ref,e);var r=e.hooks,o=l&&l.hooks;(r&&(r.willRemove||r.didRemove)||o&&(o.willUnmount||o.didUnmount))&&L(e),d(e.body)?T(e):""===e.body?e.body=null:null==e.body||e.body instanceof D||(e.body=""+e.body)}}function T(e){for(var n=e.body,t=0;t<n.length;t++){var r=n[t];false===r||null==r?n.splice(t--,1):d(r)?c(n,r,t--,1):(null==r.type&&(n[t]=r=E(""+r)),r.type===l?null==r.body||""===r.body?n.splice(t--,1):t>0&&n[t-1].type===l?(n[t-1].body+=r.body,n.splice(t--,1)):M(r,e,t,null):M(r,e,t,null))}}function B(e,n){return n}function O(e,n){var t=(e.attrs||a).style,l=n?(n.attrs||a).style:null;if(null==t||v(t))e.el.style.cssText=t;else{for(var r in t){var i=t[r];(null==l||null!=i&&i!==l[r])&&(e.el.style[r]=B(0,i))}if(l)for(var u in l)null==t[u]&&(e.el.style[u]="")}}function Y(e){null!=e.syncRedraw&&e.syncRedraw,null!=e.didRedraws&&e.didRedraws}var F={};function H(e){F[e]||(F[e]=true,P(o,e,G,true))}function K(e,n,t,l){e.removeEventListener(n.slice(2),t,l)}function P(e,n,t,l){e.addEventListener(n.slice(2),t,l)}function X(e,n,t,l,r){if(false===e.apply(r,n.concat([t,l,r,r.data]))||false)return t.preventDefault(),t.stopPropagation(),false}function z(e,n){var t,l,r="on"+e,i=[];while(n)(l=n.attrs)&&(t=l[r])&&d(t)&&i.unshift(t),n=n.parent;return i}function G(e){var n=e.target._node;if(null!=n)for(var t=z(e.type,n),l=C(n),r=0;r<t.length;r++){if(false===X(t[r][0],t[r].slice(1),e,n,l))break}}function J(e,n,t,l){if(t!=l){var r=e.el;y(t)?P(r,n,t,false):null!=t&&H(n),y(l)&&K(r,n,l,false)}}function Q(e,n,t){t?e.el[n]="":e.el.removeAttribute(n)}function W(e,n,t,l){var r=e.el;null!=e.ns?r.setAttribute(n,t):"class"===n?r.className=t:"id"===n||"boolean"==typeof t||l?r[n]=t:"."===n[0]?r[n.substr(1)]=t:r.setAttribute(n,t)}function Z(e,n){var t=e.attrs||a,l=n.attrs||a;if(t===l);else{for(var r in t){var i=t[r];if(null!=i){var u=R(e.tag,r),o=u?e.el[r]:l[r];i===o||(_(r)?O(e,n):m(r)?J(e,r,i,o):W(e,r,i,u))}}for(var r in l)null==t[r]&&(m(r)?J(e,r,t[r],l[r]):Q(e,r,R(e.tag,r)))}}function $(e,n,t,l){return e.type===i&&(n=e.data,t=e.key,l=e.opts,e=e.view),new je(e,n,t,l)}var ee=[];function ne(e,n,t,l,r){if(null!=e){var i=t.hooks[n];if(i){if("d"!==n[0]||"i"!==n[1]||"d"!==n[2])return i(t,l);r?(x(t.parent),i(t,l)):ee.push([i,t,l])}}}function te(e,n){if(ee.length){var t;n&&x(e.node);while(t=ee.shift())t[0](t[1],t[2])}}function le(e,n){return null!=n?o.createElementNS(n,e):o.createElement(e)}function re(e){return o.createTextNode(e)}function ie(e){return o.createComment(e)}function ue(e){return e.nextSibling}function oe(e){var n=e.vm,t=null!=n&&ne(n.hooks,"willUnmount",n,n.data),l=ne(e.hooks,"willRemove",e);if((e.flags&V)===V&&d(e.body))for(var r=0;r<e.body.length;r++)oe(e.body[r]);return t||l}function ae(e,n){if(n){var t=e.vm;null!=t&&(t.node=t.refs=null)}var l=e.body;if(d(l))for(var r=0;r<l.length;r++)ae(l[r],true)}function fe(e,n,t){var l=n._node,r=l.vm;if(ae(l,true),(l.flags&V)===V)for(var i=0;i<l.body.length;i++)fe(n,l.body[i].el);delete n._node,e.removeChild(n),ne(l.hooks,"didRemove",l,null,t),null!=r&&(ne(r.hooks,"didUnmount",r,r.data,t),r.node=null)}function de(e,n){var t=n._node;if(!t._dead){var l=oe(t);null!=l&&p(l)?(t._dead=true,l.then(w(fe,[e,n,true]))):fe(e,n)}}function se(e){var n=e.el;if(0==(e.flags&V))ae(e,false),n.textContent=null;else{var t=n.firstChild;if(null!=t)do{var l=ue(t);de(n,t)}while(t=l)}}function ce(e,n,t){var l=n._node,r=null!=n.parentNode,i=n!==t&&r?null:l.vm;null!=i&&ne(i.hooks,"willMount",i,i.data),ne(l.hooks,r?"willReinsert":"willInsert",l),e.insertBefore(n,t),ne(l.hooks,r?"didReinsert":"didInsert",l),null!=i&&ne(i.hooks,"didMount",i,i.data)}function ve(e,n,t){ce(e,n,t?ue(t):null)}function ye(e){for(var n=0;n<e.body.length;n++){var t=e.body[n],l=t.type;if(l<=r)ce(e.el,pe(t));else if(l===i){l=(o=$(t.view,t.data,t.key,t.opts)._redraw(e,n,false)).node.type,ce(e.el,pe(o.node))}else if(l===u){var o;(o=t.vm)._update(t.data,e,n,true,true),l=o.node.type,ce(e.el,o.node.el)}}}function pe(e,n){return null==e.el&&(e.type===t?(e.el=n||le(e.tag,e.ns),null!=e.attrs&&Z(e,a),(e.flags&U)===U&&e.body.body(e),d(e.body)?ye(e):null!=e.body&&(e.el.textContent=e.body)):e.type===l?e.el=n||re(e.body):e.type===r&&(e.el=n||ie(e.body))),e.el._node=e,e.el}function he(e){return e.parent}var be=1,we=2;function ge(e,n,t,l,r,i,u,o){return function(a,f,d,s,c,v){var y,p;if(null!=s[l]&&he(y=s[l]._node)!==a)return p=e(s[l]),null!=y.vm?y.vm.unmount(true):de(f,s[l]),void(s[l]=p);if(s[r]==c)return we;if(null==s[r].el)t(f,pe(s[r]),s[l]),s[r]=n(s[r],d);else if(s[r].el===s[l])s[r]=n(s[r],d),s[l]=e(s[l]);else{if(v||y!==s[u])return v&&null!=s[l]?ke(e,n,t,l,r,f,d,y,s):be;p=s[l],s[l]=e(p),o(f,p,s[i]),s[i]=p}}}function ke(e,n,t,l,r,i,u,o,a){if(o._lis)t(i,a[r].el,a[l]),a[r]=n(a[r],u);else{var f=k(o.idx,a.tombs);o._lis=true;var d=e(a[l]);t(i,a[l],null!=f?u[a.tombs[f]].el:f),null==f?a.tombs.push(o.idx):a.tombs.splice(f,0,o.idx),a[l]=d}}var me=ge(ue,function(e,n){return n[e.idx+1]},ce,"lftSib","lftNode","rgtSib","rgtNode",ve),_e=ge(function(e){return e.previousSibling},function(e,n){return n[e.idx-1]},ve,"rgtSib","rgtNode","lftSib","lftNode",ce);function xe(e,n){var t=n.body,l=e.el,r=e.body,i={lftNode:r[0],rgtNode:r[r.length-1],lftSib:(t[0]||a).el,rgtSib:(t[t.length-1]||a).el};e:while(1){while(1){var u=me(e,l,r,i,null,false);if(u===be)break;if(u===we)break e}while(1){var o=_e(e,l,r,i,i.lftNode,false);if(o===be)break;if(o===we)break e}Ne(e,l,r,i);break}}function Ne(e,n,t,l){var r=[],i=n.firstChild;do{var u=i._node;u.parent===e&&r.push(u.idx)}while(i=ue(i));for(var o=g(r).map(function(e){return r[e]}),a=0;a<o.length;a++)t[o[a]]._lis=true;l.tombs=o;while(1){if(me(e,n,t,l,null,true)===we)break}}function Re(e){return e.el._node.parent!==e.parent}function Ce(e,n,t){return n[t]}function Se(e,n,t){for(;t<n.length;t++){var l=n[t];if(null!=l.vm){if(e.type===i&&l.vm.view===e.view&&l.vm.key===e.key||e.type===u&&l.vm===e.vm)return l}else if(!Re(l)&&e.tag===l.tag&&e.type===l.type&&e.key===l.key&&(e.flags&~V)==(l.flags&~V))return l}return null}function Ee(e,n,t){if(null==n._keys){if(n[t].key===e.key)return n[t];for(var l={},r=0;r<n.length;r++)l[n[r].key]=r;n._keys=l}return n[n._keys[e.key]]}function Ve(e,n){ne(n.hooks,"willRecycle",n,e);var t=e.el=n.el,r=n.body,i=e.body;if(t._node=e,e.type!==l||i===r){null==e.attrs&&null==n.attrs||Z(e,n);var u=d(r),o=d(i),a=(e.flags&U)===U;u?o||a?Ae(e,n):i!==r&&(null!=i?t.textContent=i:se(n)):o?(se(n),ye(e)):i!==r&&(null!=i&&null!=r?t.firstChild.nodeValue=i:t.textContent=i),ne(n.hooks,"didRecycle",n,e)}else t.nodeValue=i}function Ae(e,n){var l=e.body,o=l.length,a=n.body,d=a.length,s=(e.flags&U)===U,c=(e.flags&A)===A,v=(e.flags&j)===j,y=!c&&e.type===t,p=true,h=0===d?f:v?Ee:c||s?Ce:Se;if(y&&0===o)return se(n),void(s&&(e.body=[]));var b,w,g=0,k=false,m=0;if(s)var _={key:null},x=e.body=Array(o);for(var R=0;R<o;R++){if(s){var C=false;p&&(v&&(_.key=l.key(R)),b=h(_,a,m)),null!=b?(w=b.idx,l.diff.eq(R,b)?((S=b).parent=e,S.idx=R,S._lis=false):C=true):C=true,C&&((S=l.tpl(R)).type===i?S=null!=b?b.vm._update(S.data,e,R,true,true).node:$(S.view,S.data,S.key,S.opts)._redraw(e,R,false).node:(M(S,e,R),S._diff=l.diff.val(R,e),null!=b&&Ve(S,b))),x[R]=S}else{var S,E=(S=l[R]).type;if(E<=r)(b=p&&h(S,a,m))&&(Ve(S,b),w=b.idx);else if(E===i)(b=p&&h(S,a,m))?(w=b.idx,b.vm._update(S.data,e,R,true,true)):$(S.view,S.data,S.key,S.opts)._redraw(e,R,false);else if(E===u){var V=S.vm,q=N(V);q&&V.node.parent!=n&&(V.unmount(true),q=false),V._update(S.data,e,R,q,true)}}if(null!=b&&(w===m?++m===d&&o>d&&(b=null,p=false):k=true,!v&&d>100&&k&&++g%10==0))while(m<d&&Re(a[m]))m++}y&&xe(e,n)}function je(e,n,t,l){var r=this;r.view=e,r.data=n,r.key=t,l&&(r.opts=l,r.cfg(l));var i=s(e)?e:e.call(r,r,n,t,l);y(i)?r.render=i:(r.render=i.render,r.cfg(i)),r.init&&r.init.call(r,r,r.data,r.key,l)}function Ue(e){var n=this;e.init&&(n.init=e.init),e.diff&&(n.diff=e.diff),e.hooks&&(n.hooks=h(n.hooks||{},e.hooks))}je.prototype={constructor:je,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,refs:null,render:null,mount:function(e,n){var t=this;n?(se({el:e,flags:0}),t._redraw(null,null,false),e.nodeName.toLowerCase()!==t.node.tag?(pe(t.node),ce(e.parentNode,t.node.el,e),e.parentNode.removeChild(e)):ce(e.parentNode,pe(t.node,e),e)):(t._redraw(null,null),e&&ce(e,t.node.el));e&&te(t,true);return t},unmount:function(e){var n=this.node;de(n.el.parentNode,n.el),n.el=null,e||te(this,true)},cfg:Ue,config:Ue,parent:function(){return C(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(){return this._redraw(null,null,N(this)),this},update:function(e){return this._update(e,null,null,N(this),true),this},_update:function(e,n,t,l,r){var i=this;null!=e&&i.data!==e&&(ne(i.hooks,"willUpdate",i,e),i.data=e);return r?i._redraw(n,t,l):i},_redraw:function(e,n,t){var l,r,i=null==e,u=this,o=u.node&&u.node.el&&u.node.el.parentNode,a=null!=u.diff,f=u.node;if(a&&(r=u.diff.val(u,u.data,u.key,e,n),null!=f&&(l=f._diff,u.diff.eq(u,l,r))))return f._diff=r,qe(u,f,e,n);o&&ne(u.hooks,"willRedraw",u,u.data);var d=u.render.call(u,u,u.data,u.key,e,n);a&&(d._diff=r);if(d===f)return qe(u,f,e,n);u.refs=null,null!=u.key&&d.key!==u.key&&(d.key=u.key);u.node=d,e?(M(d,e,n,u),e.body[n]=d):f&&f.parent?(M(d,f.parent,f.idx,u),f.parent.body[f.idx]=d):M(d,null,null,u);if(false!==t)if(f)if(f.tag!==d.tag||f.key!==d.key){f.vm=d.vm=null;var s=f.el.parentNode,c=ue(f.el);de(s,f.el),ce(s,pe(d),c),f.el=d.el,d.vm=u}else Ve(d,f);else pe(d);o&&ne(u.hooks,"didRedraw",u,u.data),i&&o&&te(u,true);return u}};function qe(e,n,t,l){return null!=t&&(t.body[l]=n,n.idx=l,n.parent=t,n._lis=false),e}function De(e,n,t,l){var r,i;return null==t?s(n)?r=n:i=n:(r=n,i=t),q(e,r,i,l)}var Ie="http://www.w3.org/2000/svg";function Le(e,n,t,l){this.view=e,this.data=n,this.key=t,this.opts=l}function Me(e,n){this.vm=e,this.data=n}Le.prototype={constructor:Le,type:i,view:null,data:null,key:null,opts:null},Me.prototype={constructor:Me,type:u,vm:null,data:null},e.ViewModel=je,e.VNode=S,e.createView=$,e.defineElement=De,e.defineSvgElement=function(e,n,t,l){var r=De(e,n,t,l);return r.ns=Ie,r},e.defineText=E,e.defineComment=function(e){var n=new S;return n.type=r,n.body=e,n},e.defineView=function(e,n,t,l){return new Le(e,n,t,l)},e.injectView=function(e,n){return new Me(e,n)},e.injectElement=function(e){var t=new S;return t.type=n,t.el=t.key=e,t},e.list=function(e,n,t){return new D(e,n,t)},e.FIXED_BODY=A,e.KEYED_LIST=j,e.config=Y,e.cfg=Y});