// https://github.com/domvm/domvm (v3.4.12, nano build)
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).domvm={})}(this,(function(e){"use strict";var n=0,t=1,l=2,r=3,u=4,i=5,a="undefined"!=typeof window?document:{},o={};function f(){}var d=Array.isArray;function s(e){return null!=e&&e.constructor===Object}function c(e,n,t,l){e.splice.apply(e,[t,l].concat(n))}function v(e){return"function"==typeof e}function y(e){for(var n=arguments,t=1;t<n.length;t++)for(var l in n[t])e[l]=n[t][l];return e}function p(e,n){return e===n||null!=n&&null!=e&&(d(e)?function(e,n){var t=e.length;if(n.length!==t)return false;for(var l=0;l<t;l++)if(e[l]!==n[l])return false;return true}(e,n):!!s(e)&&function(e,n){for(var t in e)if(e[t]!==n[t])return false;return true}(e,n))}function h(e){return"o"===e[0]&&"n"===e[1]}function w(e){return"_"===e[0]}function g(e){return"style"===e}function b(e){e&&e.el&&e.el.offsetHeight}function k(e){return null!=e.node&&null!=e.node.el}function m(e,n){switch(n){case"value":case"checked":case"selected":return true}return false}function _(e){e=e||o;while(null==e.vm&&e.parent)e=e.parent;return e.vm}function x(){}var N=x.prototype={constructor:x,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_diff:null,_dead:false,_lis:false,idx:null,parent:null};function R(e){var n=new x;return n.type=l,n.body=e,n}N._class=null;var C={},S=/\[([^=\]]+)=?([^\]]+)?\]/g;var E=1,q=2,A=4,V=8;function j(e,n,l,r){var u=new x;u.type=t,u.flags=r||0,u.attrs=n||null;var i=function(e){var n=C[e];if(null==n){var t,l,r,u;C[e]=n={tag:(t=e.match(/^[-\w]+/))?t[0]:"div",id:(l=e.match(/#([-\w]+)/))?l[1]:null,class:(r=e.match(/\.([-\w.]+)/))?r[1].replace(/\./g," "):null,attrs:null};while(u=S.exec(e))null==n.attrs&&(n.attrs={}),n.attrs[u[1]]=u[2]||""}return n}(e);e=i.tag;var a=null!=i.id,o=null!=i.class,f=null!=i.attrs;if(a||o||f){var d=u.attrs||{};if(a&&null==d.id&&(d.id=i.id),o&&(u._class=i.class,d.class=i.class+(null!=d.class?" "+d.class:"")),f)for(var s in i.attrs)null==d[s]&&(d[s]=i.attrs[s]);u.attrs=d}if(u.tag=e,null!=u.attrs){var c=u.attrs;null!=c._key&&(u.key=c._key),null!=c._ref&&(u.ref=c._ref),null!=c._hooks&&(u.hooks=c._hooks),null!=c._data&&(u.data=c._data),null!=c._flags&&(u.flags=c._flags),null==u.key&&(null!=u.ref?u.key=u.ref:null!=c.id?u.key=c.id:null!=c.name&&(u.key=c.name+("radio"===c.type||"checkbox"===c.type?c.value:"")))}return null!=l&&(u.body=l,l instanceof U&&(u.flags=l.flags)),u}function U(e,n,t){var l,r=this,i=e.length;r.flags=V,r.items=e,r.length=i,r.key=function(){return null},r.diff={val:function(t,l){return n.val(e[t],l)},eq:function(e,t){return n.eq(t._diff,r.diff.val(e))}},r.tpl=function(n){return l(e[n],n)},r.map=function(e){return l=e,r},r.body=function(e){for(var n=[],t=0;t<i;t++){var l=r.tpl(t);l.type!=u&&(l._diff=r.diff.val(t,e)),n.push(l)}e.body=n,B(e)},null!=t&&(r.flags|=A,r.key=function(n){return t(e[n],n)}),v(n)&&(r.diff={val:function(t){return n(e[t])},eq:function(e,n){return p(n._diff,r.diff.val(e))}})}var D=f,I=false,L=f,M=f;function T(e){D=e.onevent||D,null!=e.onvnode&&(M=e.onvnode),null!=e.syncRedraw&&(I=e.syncRedraw),null!=e.didRedraws&&(L=e.didRedraws)}function O(e,n,t,l){if(M(e,n,t,l),e.type!==i&&e.type!==u){e.parent=n,e.idx=t,e.vm=l,null!=e.ref&&function(e,n,t){!function(e,n,t){var l;while(l=n.shift())0===n.length?e[l]=t:e[l]=e=e[l]||{}}(e,("refs."+n).split("."),t)}(_(e),e.ref,e);var r=e.hooks,a=l&&l.hooks;(r&&(r.willRemove||r.didRemove)||a&&(a.willUnmount||a.didUnmount))&&function(e){while(e=e.parent)e.flags|=E}(e),d(e.body)?B(e):""===e.body?e.body=null:null==e.body||e.body instanceof U||(e.body=""+e.body)}}function B(e){for(var n=e.body,t=0;t<n.length;t++){var r=n[t];false===r||null==r?n.splice(t--,1):d(r)?c(n,r,t--,1):(null==r.type&&(n[t]=r=R(r)),r.type===l?null==r.body||""===r.body?n.splice(t--,1):t>0&&n[t-1].type===l?(n[t-1].body+=r.body,n.splice(t--,1)):O(r,e,t,null):O(r,e,t,null))}}function F(e,n){return n}function Y(e,n){var t=(e.attrs||o).style,l=n?(n.attrs||o).style:null;if(null==t||function(e){var n=typeof e;return"string"===n||"number"===n}(t))e.el.style.cssText=t;else{for(var r in t){var u=t[r];(null==l||null!=u&&u!==l[r])&&(e.el.style[r]=F(0,u))}if(l)for(var i in l)null==t[i]&&(e.el.style[i]="")}}var H={};function K(e,n,t,l){e.addEventListener(n.slice(2),t,l)}function P(e,n,t,l,r){var u,i,a=e.apply(r,n.concat([t,l,r,r.data]));if(u=r.onevent(t,l,r,r.data,n),i=D.call(null,t,l,r,r.data,n),false===a||false===u||false===i)return t.preventDefault(),t.stopPropagation(),false}function X(e){var n=e.target._node;if(null!=n)for(var t=function(e,n){var t,l,r="on"+e,u=[];while(n)(l=n.attrs)&&(t=l[r])&&d(t)&&u.unshift(t),n=n.parent;return u}(e.type,n),l=_(n),r=0;r<t.length;r++){if(false===P(t[r][0],t[r].slice(1),e,n,l))break}}function z(e,n,t,l){if(t!=l){var r=e.el;v(t)?K(r,n,t,false):null!=t&&function(e){H[e]||(H[e]=true,K(a,e,X,true))}(n),v(l)&&function(e,n,t,l){e.removeEventListener(n.slice(2),t,l)}(r,n,l,false)}}function G(e,n,t){(function(e){return"."===e[0]})(n)&&(n=n.substr(1),t=true),t?e.el[n]="":e.el.removeAttribute(n)}function J(e,n,t,l){var r=e.el;null!=e.ns?r.setAttribute(n,t):"class"===n?r.className=t:"id"===n||"boolean"==typeof t||l?r[n]=t:"."===n[0]?r[n.substr(1)]=t:r.setAttribute(n,t)}function Q(e,n){var t=e.attrs||o,l=n.attrs||o;if(t===l);else{for(var r in t){var u=t[r];if(null!=u){var i=m(e.tag,r),a=i?e.el[r]:l[r];u===a||(g(r)?Y(e,n):w(r)||(h(r)?z(e,r,u,a):J(e,r,u,i)))}}for(var r in l)null==t[r]&&(h(r)?z(e,r,t[r],l[r]):w(r)||G(e,r,m(e.tag,r)))}}function W(e,n,t,l){return e.type===u&&(n=e.data,t=e.key,l=e.opts,e=e.view),new Ne(e,n,t,l)}var Z=[];function $(e,n,t,l,r){if(null!=e){var u=t.hooks[n];if(u){if("d"!==n[0]||"i"!==n[1]||"d"!==n[2])return u(t,l);r?(b(t.parent),u(t,l)):Z.push([u,t,l])}}}function ee(e,n){if(Z.length){var t;n&&b(e.node);while(t=Z.shift())t[0](t[1],t[2])}}function ne(e){return e.nextSibling}function te(e,n){if(n){var t=e.vm;null!=t&&(t.node=t.refs=null)}var l=e.body;if(d(l))for(var r=0;r<l.length;r++)te(l[r],true)}function le(e,n,t){var l=n._node,r=l.vm;if(te(l,true),(l.flags&E)===E)for(var u=0;u<l.body.length;u++)le(n,l.body[u].el);delete n._node,e.removeChild(n),$(l.hooks,"didRemove",l,null,t),null!=r&&($(r.hooks,"didUnmount",r,r.data,t),r.node=null)}function re(e,n){var t=n._node;if(!t._dead){var l=function e(n){var t=n.vm,l=null!=t&&$(t.hooks,"willUnmount",t,t.data),r=$(n.hooks,"willRemove",n);if((n.flags&E)===E&&d(n.body))for(var u=0;u<n.body.length;u++)e(n.body[u]);return l||r}(t);null!=l&&function(e){return"object"==typeof e&&v(e.then)}(l)?(t._dead=true,l.then(function(e,n,t){return function(){return e.apply(t,n)}}(le,[e,n,true]))):le(e,n)}}function ue(e){var n=e.el;if(0==(e.flags&E))te(e,false),n.textContent=null;else{var t=n.firstChild;if(null!=t)do{var l=ne(t);re(n,t)}while(t=l)}}function ie(e,n,t){var l=n._node,r=null!=n.parentNode,u=n!==t&&r?null:l.vm;null!=u&&$(u.hooks,"willMount",u,u.data),$(l.hooks,r?"willReinsert":"willInsert",l),e.insertBefore(n,t),$(l.hooks,r?"didReinsert":"didInsert",l),null!=u&&$(u.hooks,"didMount",u,u.data)}function ae(e,n,t){ie(e,n,t?ne(t):null)}function oe(e){for(var n=0;n<e.body.length;n++){var t=e.body[n],l=t.type;if(l<=r)ie(e.el,fe(t));else if(l===u){l=(a=W(t.view,t.data,t.key,t.opts)._redraw(e,n,false)).node.type,ie(e.el,fe(a.node))}else if(l===i){var a;(a=t.vm)._update(t.data,e,n,true,true),l=a.node.type,ie(e.el,a.node.el)}}}function fe(e,n){return null==e.el&&(e.type===t?(e.el=n||function(e,n){return null!=n?a.createElementNS(n,e):a.createElement(e)}(e.tag,e.ns),null!=e.attrs&&Q(e,o),(e.flags&V)===V&&e.body.body(e),d(e.body)?oe(e):null!=e.body&&(e.el.textContent=e.body)):e.type===l?e.el=n||function(e){return a.createTextNode(e)}(e.body):e.type===r&&(e.el=n||function(e){return a.createComment(e)}(e.body))),e.el._node=e,e.el}var de=1,se=2;function ce(e,n,t,l,r,u,i,a){return function(o,f,d,s,c,v){var y,p;if(null!=s[l]){if(null==(y=s[l]._node))return void(s[l]=e(s[l]));if(function(e){return e.parent}(y)!==o)return p=e(s[l]),null!=y.vm?y.vm.unmount(true):re(f,s[l]),void(s[l]=p)}if(s[r]==c)return se;if(null==s[r].el)t(f,fe(s[r]),s[l]),s[r]=n(s[r],d);else if(s[r].el===s[l])s[r]=n(s[r],d),s[l]=e(s[l]);else{if(v||y!==s[i])return v&&null!=s[l]?function(e,n,t,l,r,u,i,a,o){if(a._lis)t(u,o[r].el,o[l]),o[r]=n(o[r],i);else{var f=function(e,n){var t,l=0,r=n.length-1;if(r<=2147483647)while(l<=r){if(n[t=l+r>>1]===e)return t;n[t]<e?l=t+1:r=t-1}else while(l<=r){if(n[t=Math.floor((l+r)/2)]===e)return t;n[t]<e?l=t+1:r=t-1}return l==n.length?null:l}(a.idx,o.tombs);a._lis=true;var d=e(o[l]);t(u,o[l],null!=f?i[o.tombs[f]].el:f),null==f?o.tombs.push(a.idx):o.tombs.splice(f,0,a.idx),o[l]=d}}(e,n,t,l,r,f,d,y,s):de;p=s[l],s[l]=e(p),a(f,p,s[u]),s[u]=p}}}var ve=ce(ne,(function(e,n){return n[e.idx+1]}),ie,"lftSib","lftNode","rgtSib","rgtNode",ae),ye=ce((function(e){return e.previousSibling}),(function(e,n){return n[e.idx-1]}),ae,"rgtSib","rgtNode","lftSib","lftNode",ie);function pe(e,n,t,l){var r=[],u=n.firstChild;do{var i=u._node;i.parent===e&&r.push(i.idx)}while(u=ne(u));for(var a=function(e){var n=e.slice(),t=[];t[0]=0;for(var l,r,u,i=0,a=0;a<e.length;++a){var o=e[a];if(e[u=t[i]]<o)n[a]=u,t[++i]=a;else{l=0,r=i;while(l<r)e[t[u=l+r>>1]]<o?l=u+1:r=u;o<e[t[l]]&&(l>0&&(n[a]=t[l-1]),t[l]=a)}}r=t[i];while(i>=0)t[i--]=r,r=n[r];return t}(r).map((function(e){return r[e]})),o=0;o<a.length;o++)t[a[o]]._lis=true;l.tombs=a;while(1){if(ve(e,n,t,l,null,true)===se)break}}function he(e){return e.el._node.parent!==e.parent}function we(e,n,t){return n[t]}function ge(e,n,t){for(;t<n.length;t++){var l=n[t];if(null!=l.vm){if(e.type===u&&l.vm.view===e.view&&l.vm.key===e.key||e.type===i&&l.vm===e.vm)return l}else if(!he(l)&&e.tag===l.tag&&e.type===l.type&&e.key===l.key&&(e.flags&~E)==(l.flags&~E))return l}return null}function be(e,n,t){if(null==n._keys){if(n[t].key===e.key)return n[t];for(var l={},r=0;r<n.length;r++)l[n[r].key]=r;n._keys=l}return n[n._keys[e.key]]}function ke(e,n){$(n.hooks,"willRecycle",n,e);var a=e.el=n.el,s=n.body,c=e.body;if(a._node=e,e.type!==l||c===s){null==e.attrs&&null==n.attrs||Q(e,n);var v=d(s),y=d(c),p=(e.flags&V)===V;v?y||p?function(e,n){var l=e.body,a=l.length,d=n.body,s=d.length,c=(e.flags&V)===V,v=(e.flags&q)===q,y=(e.flags&A)===A,p=!v&&e.type===t,h=true,w=0===s?f:y?be:v||c?we:ge;if(p&&0===a)return ue(n),void(c&&(e.body=[]));var g,b,m=0,_=false,x=0;if(c)var N={key:null},R=e.body=Array(a);for(var C=0;C<a;C++){if(c){var S=false;h&&(y&&(N.key=l.key(C)),g=w(N,d,x)),null!=g?(b=g.idx,l.diff.eq(C,g)?((E=g).parent=e,E.idx=C,E._lis=false):S=true):S=true,S&&((E=l.tpl(C)).type===u?E=null!=g?g.vm._update(E.data,e,C,true,true).node:W(E.view,E.data,E.key,E.opts)._redraw(e,C,false).node:(O(E,e,C),E._diff=l.diff.val(C,e),null!=g&&ke(E,g))),R[C]=E}else{var E,j=(E=l[C]).type;if(j<=r)(g=h&&w(E,d,x))&&(ke(E,g),b=g.idx);else if(j===u)(g=h&&w(E,d,x))?(b=g.idx,g.vm._update(E.data,e,C,true,true)):W(E.view,E.data,E.key,E.opts)._redraw(e,C,false);else if(j===i){var U=E.vm,D=k(U);D&&U.node.parent!=n&&(U.unmount(true),D=false),U._update(E.data,e,C,D,true)}}if(null!=g&&(b===x?++x===s&&a>s&&(g=null,h=false):_=true,!y&&s>100&&_&&++m%10==0))while(x<s&&he(d[x]))x++}p&&function(e,n){var t=n.body,l=e.el,r=e.body,u={lftNode:r[0],rgtNode:r[r.length-1],lftSib:(t[0]||o).el,rgtSib:(t[t.length-1]||o).el};e:while(1){while(1){var i=ve(e,l,r,u,null,false);if(i===de)break;if(i===se)break e}while(1){var a=ye(e,l,r,u,u.lftNode,false);if(a===de)break;if(a===se)break e}pe(e,l,r,u);break}}(e,n)}(e,n):c!==s&&(null!=c?a.textContent=c:ue(n)):y?(ue(n),oe(e)):c!==s&&(null!=c&&null!=s?a.firstChild.nodeValue=c:a.textContent=c),$(n.hooks,"didRecycle",n,e)}else a.nodeValue=c}var me=new Set,_e=0;function xe(){me.forEach((function(e){if(null!=e.node){var n=e;while(n=n.parent())if(me.has(n))return;e.redraw(true)}})),L(me),me.clear(),_e=0}function Ne(e,n,t,l){var r=this;r.view=e,r.data=n,r.key=t,l&&(r.opts=l,r.cfg(l));var u=s(e)?e:e.call(r,r,n,t,l);v(u)?r.render=u:(r.render=u.render,r.cfg(u)),r.init&&r.init.call(r,r,r.data,r.key,l)}function Re(e,n,t){return p(n,t)}function Ce(e){var n=this;e.init&&(n.init=e.init),e.diff&&(v(e.diff)?n.diff={val:e.diff,eq:Re}:n.diff=e.diff),e.onevent&&(n.onevent=e.onevent),e.hooks&&(n.hooks=y(n.hooks||{},e.hooks))}function Se(e,n,t,l){return null!=t&&(t.body[l]=n,n.idx=l,n.parent=t,n._lis=false),e}function Ee(e,n,t,l){var r,u;return null==t?s(n)?r=n:u=n:(r=n,u=t),j(e,r,u,l)}(Ne.prototype={constructor:Ne,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,refs:null,render:null,mount:function(e,n){var t=this;n?(ue({el:e,flags:0}),t._redraw(null,null,false),e.nodeName.toLowerCase()!==t.node.tag?(fe(t.node),ie(e.parentNode,t.node.el,e),e.parentNode.removeChild(e)):ie(e.parentNode,fe(t.node,e),e)):(t._redraw(null,null),e&&ie(e,t.node.el));e&&ee(t,true);return t},unmount:function(e){var n=this.node;re(n.el.parentNode,n.el),n.el=null,e||ee(this,true)},cfg:Ce,config:Ce,parent:function(){return _(this.node.parent)},root:function(){var e=this.node;while(e.parent)e=e.parent;return e.vm},redraw:function(e){return null==e&&(e=I),e?this._redraw(null,null,k(this)):(me.add(this),0===_e&&(_e=requestAnimationFrame(xe))),this},update:function(e,n){return null==n&&(n=I),this._update(e,null,null,k(this),n),n||this.redraw(),this},_update:function(e,n,t,l,r){var u=this;null!=e&&u.data!==e&&($(u.hooks,"willUpdate",u,e),u.data=e);return r?u._redraw(n,t,l):u},_redraw:function(e,n,t){var l,r,u=null==e,i=this,a=i.node&&i.node.el&&i.node.el.parentNode,o=null!=i.diff,f=i.node;null!=f&&u&&(e=f.parent,n=f.idx);if(o&&(r=i.diff.val(i,i.data,i.key,e,n),null!=f&&(l=f._diff,i.diff.eq(i,l,r))))return f._diff=r,Se(i,f,e,n);a&&$(i.hooks,"willRedraw",i,i.data);var d=i.render.call(i,i,i.data,i.key,e,n);o&&(d._diff=r);if(d===f)return Se(i,f,e,n);i.refs=null,null!=i.key&&d.key!==i.key&&(d.key=i.key);i.node=d,e?(O(d,e,n,i),e.body[n]=d):f&&f.parent?(O(d,f.parent,f.idx,i),f.parent.body[f.idx]=d):O(d,null,null,i);if(false!==t)if(f)if(f.tag!==d.tag||f.key!==d.key){f.vm=d.vm=null;var s=f.el.parentNode,c=ne(f.el);re(s,f.el),ie(s,fe(d),c),f.el=d.el,d.vm=i}else ke(d,f);else fe(d);a&&$(i.hooks,"didRedraw",i,i.data),u&&a&&ee(i,true);return i}}).onevent=f;var qe="http://www.w3.org/2000/svg";function Ae(e,n,t,l){this.view=e,this.data=n,this.key=t,this.opts=l}function Ve(e,n){this.vm=e,this.data=n}Ae.prototype={constructor:Ae,type:u,view:null,data:null,key:null,opts:null},Ve.prototype={constructor:Ve,type:i,vm:null,data:null},N.patch=function(e,n){!function(e,n,t){if(s(n)){var l=Object.create(e);l.attrs=y({},e.attrs),null!=n.class&&null!=e._class&&(n.class=e._class+" "+n.class);y(e.attrs,n);Q(e,l),t&&b(e)}else{if(null!=e.vm)return;O(n,e.parent,e.idx,null),e.parent.body[e.idx]=n,ke(n,e),t&&b(n),ee(_(n),false)}}(this,e,n)},e.FIXED_BODY=q,e.KEYED_LIST=A,e.VNode=x,e.ViewModel=Ne,e.cfg=T,e.config=T,e.createView=W,e.defineComment=function(e){var n=new x;return n.type=r,n.body=e,n},e.defineElement=Ee,e.defineSvgElement=function(e,n,t,l){var r=Ee(e,n,t,l);return r.ns=qe,r},e.defineText=R,e.defineView=function(e,n,t,l){return new Ae(e,n,t,l)},e.injectElement=function(e){var t=new x;return t.type=n,t.el=t.key=e,t},e.injectView=function(e,n){return new Ve(e,n)},e.list=function(e,n,t){return new U(e,n,t)}}));